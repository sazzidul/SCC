

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCC BETA | Future Tech Community</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;600;700;800;900&family=Poppins:wght@600;800&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CROPPER.JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <!-- FIREBASE SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <!-- CONFETTI JS (For Celebration) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        /* =========================================
       MAIN WEBSITE STYLES
       ========================================= */
        :root {
            --bg-color: #050510;
            --card-bg: rgba(255, 255, 255, 0.03);
            --primary: #00f2ff;
            --secondary: #bc13fe;
            --accent: #ff00ff;
            --build-btn: #ffd700;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --glass-border: rgba(255, 255, 255, 0.1);
            --gradient-main: linear-gradient(135deg, var(--primary), var(--secondary));
            --dash-header-height: 80px;
            
            /* STORE SPECIFIC COLORS */
            --store-card-bg: #0b0b15;
            --store-gold: #ffc107;
            --store-btn-grad: linear-gradient(180deg, #ffc107 0%, #ff9800 100%);
            --store-green-grad: linear-gradient(180deg, #69f0ae 0%, #00c853 100%);

            /* SCRATCH CARD VARS */
            --scratch-width: 300px;
            --scratch-height: 180px;
            --scratch-radius: 15px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-main); overflow-x: hidden; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Montserrat', sans-serif; }

        /* --- UTILITIES --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .gradient-text { background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; color: transparent; }
        
        .text-danger { color: #ff0055 !important; font-weight: bold; margin-left: 3px; display: inline; }
        .text-success { color: #00ff88 !important; }
        .text-warning { color: #ffd700 !important; }

        /* --- SCROLL ANIMATIONS --- */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }


        /* --- BACKGROUND --- */
        #canvas-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.6; pointer-events: none; }

        /* --- CARDS & BUTTONS --- */
        .glass-card { background: var(--card-bg); backdrop-filter: blur(12px); border: 1px solid var(--glass-border); border-radius: 16px; padding: 30px; transition: transform 0.3s ease, border-color 0.3s ease; }
        .glass-card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 0 20px rgba(0, 242, 255, 0.1); }
        .eco-card { background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px); border-radius: 20px; padding: 25px; transition: all 0.4s ease; }
        .eco-card:hover { transform: translateY(-7px); background: rgba(255, 255, 255, 0.07); border-color: var(--primary); box-shadow: 0 10px 40px -10px rgba(0, 242, 255, 0.2); }

        .btn { padding: 14px 25px; border-radius: 50px; text-decoration: none; font-weight: 700; font-family: 'Montserrat', sans-serif; transition: all 0.3s ease; display: inline-flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer; border: none; text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.5px; }
        .btn-primary { background: var(--gradient-main); color: #fff; box-shadow: 0 4px 15px rgba(188, 19, 254, 0.4); }
        .btn-primary:hover { box-shadow: 0 0 25px rgba(0, 242, 255, 0.6); transform: translateY(-3px); }
        .btn-outline { background: rgba(255,255,255,0.05); border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: #000; transform: translateY(-3px); }
        .btn-build { background: #000; border: 2px solid var(--build-btn); color: var(--build-btn); box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2); }
        .btn-build:hover { background: var(--build-btn); color: #000; box-shadow: 0 0 25px rgba(255, 215, 0, 0.4); transform: translateY(-3px); }

        /* --- MAST DESIGN BUTTONS (Quick Links) --- */
        .mast-btn {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 200px; height: 120px;
            border-radius: 16px;
            text-decoration: none;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .mast-btn i { font-size: 2.5rem; margin-bottom: 10px; transition: transform 0.3s; }
        .mast-btn span { font-family: 'Montserrat', sans-serif; font-weight: 800; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px; }
        .mast-btn:hover { transform: translateY(-10px); }
        .mast-btn:hover i { transform: scale(1.2); }

        .mast-premium {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0,0,0,0));
            border-color: #ffd700;
            color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
        }
        .mast-premium:hover {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #000;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.6);
        }

        .mast-support {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0,0,0,0));
            border-color: #00ff88;
            color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
        }
        .mast-support:hover {
            background: linear-gradient(135deg, #00ff88, #00c853);
            color: #000;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.6);
        }
        
        .mast-review {
            background: linear-gradient(135deg, rgba(0, 242, 255, 0.1), rgba(0,0,0,0));
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.1);
        }
        .mast-review:hover {
            background: linear-gradient(135deg, var(--primary), #bc13fe);
            color: #fff;
            box-shadow: 0 0 40px rgba(0, 242, 255, 0.6);
        }


        .section-title { text-align: center; font-size: 2.2rem; margin-bottom: 1rem; white-space: nowrap; }
        @media (max-width: 768px) { .section-title { white-space: normal; font-size: 1.8rem; } }
        .section-subtitle { text-align: center; color: var(--text-muted); margin-bottom: 3rem; max-width: 700px; margin-left: auto; margin-right: auto; }

        /* --- HEADER --- */
        header { position: fixed; top: 0; width: 100%; padding: 15px 0; z-index: 1000; background: rgba(5, 5, 16, 0.95); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
        nav { display: flex; justify-content: space-between; align-items: center; height: 50px; }
        .logo { font-size: 1.5rem; font-weight: 800; font-family: 'Montserrat', sans-serif; display: flex; align-items: center; gap: 15px; text-decoration: none; color: white; }
        .logo-img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); box-shadow: 0 0 10px var(--primary); background-color: #fff; }
        .beta-box { font-size: 0.8rem; background: rgba(0, 242, 255, 0.1); border: 1px solid var(--primary); padding: 3px 10px; border-radius: 6px; color: var(--primary); font-weight: 600; letter-spacing: 1px; margin-left: 5px; }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a { color: var(--text-main); text-decoration: none; font-weight: 500; transition: color 0.3s; font-size: 0.9rem; text-transform: uppercase; }
        .nav-links a:hover { color: var(--primary); }
        .menu-toggle-btn { display: none; font-size: 1.8rem; color: white; cursor: pointer; padding: 5px; }
        
        .nav-dropdown { position: relative; }
        .nav-dropdown-content { display: none; position: absolute; top: 150%; left: 50%; transform: translateX(-50%); background-color: #0a0a15; min-width: 220px; box-shadow: 0 8px 16px rgba(0,0,0,0.5); border: 1px solid var(--primary); border-radius: 10px; z-index: 1; padding: 10px; backdrop-filter: blur(10px); }
        .nav-dropdown:hover .nav-dropdown-content { display: block; }
        .nav-dropdown-content a { color: white; padding: 10px 15px; text-decoration: none; display: block; text-align: left; border-radius: 5px; }
        .nav-dropdown-content a:hover { background-color: rgba(255,255,255,0.05); color: var(--primary); }
        .nav-dropdown .dropdown-toggle { cursor: pointer; }

        /* --- SIDEBAR (WITH ANIMATION) --- */
        .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); z-index: 1001; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        .sidebar { position: fixed; top: 0; right: -300px; width: 280px; height: 100vh; background: #0a0a15; border-left: 1px solid var(--primary); z-index: 1002; padding: 25px; transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; overflow-y: auto; }
        .sidebar.active { right: 0; }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 15px; }
        .close-btn { font-size: 1.5rem; color: var(--text-muted); cursor: pointer; transition: 0.3s; }
        .sidebar-menu { display: flex; flex-direction: column; gap: 5px; padding-bottom: 40px; }
        .menu-category { color: #64748b; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-top: 20px; margin-bottom: 8px; padding-left: 10px; }
        
        /* Sidebar item animation base state */
        .sidebar-menu > * { opacity: 0; transform: translateX(20px); transition: opacity 0.3s ease, transform 0.3s ease; }
        /* Sidebar item animation when active */
        .sidebar.active .sidebar-menu > * { opacity: 1; transform: translateX(0); }

        /* Staggered delay for sidebar items */
        .sidebar.active .sidebar-menu > *:nth-child(1) { transition-delay: 0.1s; } .sidebar.active .sidebar-menu > *:nth-child(2) { transition-delay: 0.12s; } .sidebar.active .sidebar-menu > *:nth-child(3) { transition-delay: 0.14s; } .sidebar.active .sidebar-menu > *:nth-child(4) { transition-delay: 0.16s; } .sidebar.active .sidebar-menu > *:nth-child(5) { transition-delay: 0.18s; } .sidebar.active .sidebar-menu > *:nth-child(6) { transition-delay: 0.2s; } .sidebar.active .sidebar-menu > *:nth-child(7) { transition-delay: 0.22s; } .sidebar.active .sidebar-menu > *:nth-child(8) { transition-delay: 0.24s; } .sidebar.active .sidebar-menu > *:nth-child(9) { transition-delay: 0.26s; } .sidebar.active .sidebar-menu > *:nth-child(10) { transition-delay: 0.28s; } .sidebar.active .sidebar-menu > *:nth-child(11) { transition-delay: 0.3s; } .sidebar.active .sidebar-menu > *:nth-child(12) { transition-delay: 0.32s; } .sidebar.active .sidebar-menu > *:nth-child(13) { transition-delay: 0.34s; } .sidebar.active .sidebar-menu > *:nth-child(14) { transition-delay: 0.36s; } .sidebar.active .sidebar-menu > *:nth-child(15) { transition-delay: 0.38s; } .sidebar.active .sidebar-menu > *:nth-child(16) { transition-delay: 0.4s; } .sidebar.active .sidebar-menu > *:nth-child(17) { transition-delay: 0.42s; } .sidebar.active .sidebar-menu > *:nth-child(18) { transition-delay: 0.44s; } .sidebar.active .sidebar-menu > *:nth-child(19) { transition-delay: 0.46s; } .sidebar.active .sidebar-menu > *:nth-child(20) { transition-delay: 0.48s; }

        .menu-item { color: white; text-decoration: none; font-size: 0.95rem; font-weight: 500; padding: 10px 15px; border-radius: 8px; transition: all 0.3s; display: flex; align-items: center; gap: 15px; text-transform: uppercase; cursor: pointer; }
        .menu-item i { width: 20px; text-align: center; color: #a0a0a0; transition: 0.3s; font-size: 1rem; }
        .menu-item:hover { background: rgba(255, 255, 255, 0.05); color: var(--primary); padding-left: 20px; }
        .menu-item:hover i { color: var(--primary); }
        .menu-login-btn { margin-top: 20px; border: 1px solid var(--primary); color: var(--primary); justify-content: center; font-weight: 700; background: rgba(0, 242, 255, 0.05); }
        .menu-login-btn:hover { background: var(--primary); color: #000; }


        /* --- STATS & REVENUE --- */
        .revenue-split { display: flex; flex-wrap: wrap; gap: 30px; justify-content: center; margin-top: 40px; }
        .split-circle { width: 160px; height: 160px; border-radius: 50%; background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; position: relative; box-shadow: 0 0 15px rgba(0, 0, 0, 0.5); transition: 0.3s; }
        .split-circle.main-share { border: 3px solid var(--primary); box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); transform: scale(1.1); animation: pulse-glow 2s infinite; }
        @keyframes pulse-glow { 0% { box-shadow: 0 0 20px rgba(0, 242, 255, 0.3); } 50% { box-shadow: 0 0 40px rgba(0, 242, 255, 0.6); } 100% { box-shadow: 0 0 20px rgba(0, 242, 255, 0.3); } }
        .split-circle span { font-size: 2.2rem; font-weight: 800; color: white; }
        .split-circle p { font-size: 0.9rem; color: var(--text-muted); margin-top: 5px; text-transform: uppercase; }
        
        .hero { min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; position: relative; padding-top: 80px; }
        .hero-content h1 { font-size: 4rem; line-height: 1.1; margin-bottom: 20px; text-shadow: 0 0 20px rgba(0, 242, 255, 0.3); }
        .hero-content p { font-size: 1.2rem; color: var(--text-muted); margin-bottom: 40px; letter-spacing: 1px; }
        .hero-btns { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        section { padding: 80px 0; }
        .community-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }

        .stats-bar { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 40px; background: linear-gradient(180deg, rgba(0, 0, 0, 0), rgba(0, 242, 255, 0.05), rgba(0, 0, 0, 0)); padding: 50px 0; margin: 40px 0; }
        .stat-item { text-align: center; background: rgba(255, 255, 255, 0.02); padding: 20px; width: 250px; border-radius: 10px; border-bottom: 1px solid var(--primary); }
        .stat-number { font-size: 3.5rem; font-weight: 800; color: var(--accent); display: block; margin-bottom: 5px; }
        .stat-label { font-size: 1.1rem; color: white; text-transform: uppercase; letter-spacing: 2px; }

        /* --- FORM --- */
        .form-container { max-width: 800px; margin: 0 auto; border: 1px solid var(--primary); box-shadow: 0 0 30px rgba(0, 242, 255, 0.1); position: relative; overflow: hidden; border-radius: 16px; padding: 30px; background: rgba(0, 0, 0, 0.4); }
        .form-container::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px; background: linear-gradient(90deg, transparent, var(--primary), transparent); }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 10px; color: var(--primary); font-size: 0.9rem; font-weight: 600; letter-spacing: 0.5px; white-space: nowrap; } 
        
        /* FIX: Allow checkbox label to wrap */
        .checkbox-label { white-space: normal !important; display: flex; align-items: flex-start !important; gap: 10px; }
        .checkbox-label input[type="checkbox"] { margin-top: 2px; flex-shrink: 0; }
        
        .form-control { width: 100%; padding: 18px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: white; font-family: 'Inter', sans-serif; transition: all 0.3s; }
        .form-control:focus { outline: none; background: rgba(0, 242, 255, 0.05); border-color: var(--primary); box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        .submit-btn-glow { width: 100%; padding: 18px; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 2px; background: transparent; color: var(--primary); border: 2px solid var(--primary); border-radius: 50px; cursor: pointer; transition: 0.4s; font-weight: 800; margin-top: 10px; }
        .submit-btn-glow:hover { background: var(--primary); color: #000; box-shadow: 0 0 30px var(--primary); }

        /* --- FOOTER (REDESIGNED) --- */
        footer { background: #02020a; padding: 50px 0 0 0; border-top: 1px solid rgba(255, 255, 255, 0.05); }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 40px; padding: 0 20px; max-width: 1200px; margin: 0 auto 40px auto; }
        .footer-column h4 { font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 1.1rem; margin-bottom: 20px; color: white; text-transform: uppercase; letter-spacing: 1px; }
        .footer-column p { color: var(--text-muted); line-height: 1.7; }
        .footer-links { list-style: none; padding: 0; }
        .footer-links li { margin-bottom: 12px; }
        .footer-links a { color: var(--text-muted); text-decoration: none; transition: 0.3s; font-size: 0.95rem; cursor: pointer; }
        .footer-links a:hover { color: var(--primary); padding-left: 5px; }
        .footer-social { display: flex; gap: 20px; margin-top: 20px; }
        .footer-social a { color: #aaa; font-size: 1.5rem; transition: 0.3s; }
        .footer-social a:hover { color: var(--accent); transform: translateY(-3px); }
        .copyright { text-align: center; color: var(--text-muted); font-size: 0.9rem; padding: 20px 0; background: #000; width: 100%; border-top: 1px solid rgba(255,255,255,0.05); }

        /* --- MODALS --- */
        .story-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000000; z-index: 2000; overflow-y: auto; display: none; padding: 0; }
        .story-modal.active { display: block; animation: slideUp 0.6s ease; }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .story-header-bar { position: sticky; top: 0; background: rgba(5, 5, 16, 0.95); backdrop-filter: blur(10px); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--primary); z-index: 2001; }
        
        /* FIX: Ensure modal title stays on one line & is responsive */
        .story-header-bar .logo { 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
            max-width: calc(100% - 120px);
            font-size: clamp(1.1rem, 4.5vw, 1.4rem);
        }

        .story-close-btn { background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 8px 20px; border-radius: 50px; cursor: pointer; font-weight: bold; text-transform: uppercase; }
        .story-content { max-width: 900px; margin: 40px auto 80px; padding: 20px; color: white; }
        .cool-box { background: rgba(20, 20, 30, 0.8); border: 1px solid var(--primary); border-radius: 20px; padding: 30px; margin: 30px 0; position: relative; box-shadow: 0 0 20px rgba(0, 242, 255, 0.1); text-align: center; }
        .cool-box::before { content: ''; position: absolute; top: -2px; left: 20%; right: 20%; height: 2px; background: var(--gradient-main); box-shadow: 0 0 15px var(--primary); }
        .grid-box { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
        .small-box { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 20px; text-align: center; }
        .story-heading { font-size: 2.2rem; margin-bottom: 20px; background: var(--gradient-main); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-align: center; font-weight: 800; }
        
        .login-content { max-width: 400px; margin: 100px auto; background: rgba(20, 20, 30, 0.9); border: 1px solid var(--primary); border-radius: 16px; padding: 40px; position: relative; }
        
        /* NEW: FULL PAGE OVERLAY STYLE (Reduced Margins) */
        .page-full-view { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #050510; z-index: 10005; overflow-y: auto; display: none; }
        .page-full-view.active { display: block; animation: fadeIn 0.4s ease; }
        .page-container { max-width: 900px; margin: 10px auto; padding: 20px; } /* Fixed Gap */
        .legal-text-content { color: #ccc; line-height: 1.8; font-size: 1rem; margin-top: 30px; white-space: pre-wrap; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* CREDENTIALS BOX */
        .creds-container { border: 2px solid #00f2ff; background: #000; border-radius: 15px; padding: 30px 20px; text-align: center; margin-top: 20px; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .creds-label { color: #a0a0a0; font-size: 0.9rem; text-transform: uppercase; margin-bottom: 5px; display: block; }
        .creds-value { font-size: 1.8rem; font-weight: 800; color: #ff00ff; text-shadow: 0 0 15px #ff00ff; margin-bottom: 20px; display: block; font-family: 'Montserrat', sans-serif; letter-spacing: 1px; }
        .save-btn { background-color: #00f2ff; color: #000; border: none; padding: 15px 40px; font-size: 1.1rem; font-weight: 800; border-radius: 50px; margin-top: 30px; width: 100%; cursor: pointer; box-shadow: 0 0 20px rgba(0, 242, 255, 0.5); text-transform: uppercase; }
        .save-btn:hover { background-color: #fff; box-shadow: 0 0 40px rgba(0, 242, 255, 0.8); }

        /* Support Success Message Design */
        .support-success-box { text-align: center; padding: 20px; }
        .support-success-box i { font-size: 4rem; color: #00ff88; margin-bottom: 20px; text-shadow: 0 0 20px rgba(0,255,136,0.3); }

        /* Feedback Specific Styles */
        .rating-stars { display: flex; justify-content: center; gap: 10px; margin: 15px 0; }
        .rating-stars i { font-size: 1.8rem; color: #333; cursor: pointer; transition: 0.3s; }
        .rating-stars i.active { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }

        /* DONATION ANIMATION */
        .donation-box { text-align: center; margin-top: 50px; }
        .donate-icon { font-size: 5rem; color: #00ff88; text-shadow: 0 0 30px #00ff88; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        
        /* NEW: INSIGHTS SECTION STYLES */
        .insights-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .insight-card { background: var(--card-bg); border: 1px solid var(--glass-border); border-radius: 16px; padding: 30px; display: flex; flex-direction: column; }
        .insight-card-header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
        .insight-card-icon { font-size: 2rem; color: var(--primary); width: 40px; text-align: center; }
        .insight-card h4 { font-size: 1.3rem; font-family: 'Montserrat', sans-serif; }
        .insight-card p { color: var(--text-muted); font-size: 0.95rem; line-height: 1.7; flex-grow: 1; }
        .insight-card-footer { margin-top: 20px; color: #888; font-size: 0.85rem; }

        /* =========================================
       DASHBOARD STYLES
       ========================================= */
        #main-dashboard {
            display: none; 
            background-color: #030812;
            background-image: radial-gradient(circle at 10% 20%, rgba(188, 19, 254, 0.15) 0%, transparent 40%), radial-gradient(circle at 90% 80%, rgba(0, 242, 255, 0.15) 0%, transparent 40%);
            min-height: 100vh;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 5000;
        }
        
        /* FULL SCREEN OVERLAY FOR SUSPENSION */
        .suspension-full-screen {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 0, 0, 0.98); z-index: 9999;
            flex-direction: column; align-items: center; justify-content: center;
            pointer-events: all; padding: 20px;
        }
        .suspension-card {
            background: rgba(40,0,0,0.8);
            border: 2px solid red;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            box-shadow: 0 0 50px rgba(255,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        .suspension-card::before {
            content: ''; position: absolute; top:0; left:0; width:100%; height: 5px; background: red;
            box-shadow: 0 0 20px red;
        }
        .suspension-cross {
            font-size: 5rem; color: red; margin-bottom: 20px;
            text-shadow: 0 0 30px red;
            animation: pulse-cross 1.5s infinite;
        }
        @keyframes pulse-cross { 0% {transform: scale(1); opacity: 0.8;} 50% {transform: scale(1.1); opacity: 1;} 100% {transform: scale(1); opacity: 0.8;} }

        /* APPEAL BUTTON */
        .appeal-btn {
            margin-top: 30px;
            background: transparent;
            border: 2px solid white;
            color: white;
            padding: 12px 35px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 800;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative; 
            z-index: 10002; /* High Z-index to ensure clickability */
        }
        .appeal-btn:hover { background: white; color: black; box-shadow: 0 0 20px white; }
        
        /* APPEAL FORM SPECIFIC */
        .appeal-textarea-container { position: relative; }
        .char-count { position: absolute; bottom: 10px; right: 10px; font-size: 0.7rem; color: #666; }
        .appeal-warning { background: rgba(255, 215, 0, 0.1); border-left: 3px solid #ffd700; color: #ddd; padding: 10px; font-size: 0.85rem; margin-bottom: 15px; }

        body.is-suspended #main-dashboard { border: 5px solid red; background: #1a0000 !important; filter: blur(5px); }
        body.is-suspended .suspension-full-screen { display: flex; }

        .dash-container { max-width: 1400px; margin: 0 auto; padding: 20px; padding-top: calc(var(--dash-header-height) + 20px); width: 100%; }

        .dash-header {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--dash-header-height);
            background: rgba(3, 8, 18, 0.95); backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000; display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
        }
        .header-logo { font-family: 'Montserrat', sans-serif; font-size: 1.2rem; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        .dash-btn-danger { background: rgba(255, 0, 85, 0.1); color: #ff0055; border: 1px solid rgba(255, 0, 85, 0.3); padding: 8px 20px; border-radius: 50px; cursor: pointer; font-weight: 600; }
        .dash-btn-danger:hover { background: #ff0055; color: white; }

        .dash-notice-card { background: rgba(255, 0, 85, 0.05); border: 1px solid rgba(255, 0, 85, 0.2); border-left: 5px solid #ff0055; padding: 25px; border-radius: 12px; margin-bottom: 30px; position: relative; overflow: hidden; }
        .dash-notice-card h3 { color: #ff0055; font-size: 1.1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .dash-notice-list { list-style: none; padding-left: 0; margin: 15px 0; }
        .dash-notice-list li { margin-bottom: 8px; color: #cbd5e1; font-size: 0.9rem; padding-left: 15px; position: relative; }
        .dash-notice-list li::before { content: "â€¢"; color: #ff0055; position: absolute; left: 0; font-weight: bold; }
        .notice-highlight { color: #fff; font-weight: 600; margin-top: 10px; display: block; }
        .notice-slogan { color: var(--primary); font-family: 'Montserrat', sans-serif; font-weight: 700; margin-top: 10px; letter-spacing: 0.5px; text-transform: uppercase; font-size: 0.85rem; }
        .notice-sign { text-align: right; margin-top: 15px; font-style: italic; color: #94a3b8; font-size: 0.85rem; border-top: 1px solid rgba(255,0,85,0.2); padding-top: 10px; }

        .dash-grid { display: grid; grid-template-columns: 350px 1fr; gap: 25px; }
        .dash-glass-card { background: rgba(20, 20, 35, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 25px; margin-bottom: 25px; position: relative; overflow: hidden; }
        .dash-card-title { font-family: 'Montserrat', sans-serif; font-size: 1.1rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; color: white; border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 10px; }
        
        .profile-header { text-align: center; margin-bottom: 20px; }
        .profile-pic-container { position: relative; width: 100px; height: 100px; margin: 0 auto 15px auto; cursor: pointer; border-radius: 50%; }
        
        .profile-pic-container .edit-icon { position: absolute; bottom: 0; right: 0; background: rgba(0,0,0,0.7); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; border: 1px solid var(--primary); cursor: pointer; opacity: 0; transition: opacity 0.3s; }
        .profile-pic-container:hover .edit-icon { opacity: 1; }
        .profile-pic { width: 100%; height: 100%; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; }
        
        .user-id-pill { background: rgba(255, 255, 255, 0.1); padding: 4px 12px; border-radius: 4px; color: #a0a0a0; font-size: 0.85rem; margin-top: 5px; display: inline-block; letter-spacing: 1px; }

        .badge-container { display: flex; gap: 15px; justify-content: center; margin: 15px 0; }
        .badge-level { background: #6a0dad; color: white; border: 1px solid #8a2be2; padding: 8px 20px; border-radius: 50px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; box-shadow: 0 0 10px rgba(138, 43, 226, 0.4); }
        
        .badge-status { background: transparent; color: #00ff88; border: 1px solid #00ff88; padding: 8px 20px; border-radius: 50px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; box-shadow: 0 0 5px rgba(0, 255, 136, 0.2); }
        .badge-status.pending { color: #ff0055; border-color: #ff0055; }
        .badge-status.rejected { color: #ff0000; border-color: #ff0000; background: rgba(255,0,0,0.1); }

        .progress-container { margin: 15px 0 25px 0; text-align: center; }
        .progress-label { font-size: 0.8rem; color: #fff; display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: 600; }
        .progress-track { width: 100%; height: 12px; background: rgba(255,255,255,0.1); border-radius: 50px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #ff0055, #ff00ff); width: 0%; border-radius: 50px; box-shadow: 0 0 10px #ff0055; transition: width 1s ease-in-out; }

        .coin-display-big { background: linear-gradient(90deg, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.3)); border: 1px solid var(--primary); border-radius: 12px; padding: 15px; text-align: center; margin-bottom: 20px; display:flex; flex-direction:column; justify-content:center; }
        .coin-amount { font-size: 2rem; font-weight: 800; color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; word-break: break-all; transition: font-size 0.3s ease; }
        .dash-coin-icon { width: 25px; height: 25px; flex-shrink: 0; }
        .dash-coin-icon.large { width: 40px; height: 40px; }
        .dash-flex-center { display: flex; align-items: center; justify-content: center; }

        .info-list { list-style: none; font-size: 0.9rem; color: #94a3b8; }
        .info-list li { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
        .info-list span.val { color: white; font-weight: 500; }

        .daily-reward-box { text-align: center; padding: 30px; }
        .reward-btn { background: var(--primary); color: #000; padding: 12px 30px; border-radius: 50px; font-weight: 700; border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; margin-top: 15px; }
        .reward-btn:disabled { background: #334155; color: #94a3b8; cursor: not-allowed; }
        
        .task-list { display: flex; flex-direction: column; gap: 15px; }
        .task-item { background: rgba(255, 255, 255, 0.03); padding: 15px; border-radius: 10px; display: flex; align-items: center; justify-content: space-between; border: 1px solid transparent; cursor: pointer; transition: 0.3s; }
        .task-item.locked { opacity: 0.7; pointer-events: none; border-color: rgba(255, 255, 255, 0.05); }
        .task-item.active { border-color: var(--primary); opacity: 1; pointer-events: all; }
        .task-item.completed { border-color: #00ff88; background: rgba(0, 255, 136, 0.05); }
        .task-icon { font-size: 1.5rem; margin-right: 15px; width: 30px; text-align: center; }

        /* --- NEW STORE STYLES --- */
        .store-filters { 
            display: flex; gap: 10px; margin-bottom: 25px; 
            flex-wrap: nowrap; overflow-x: auto; padding-bottom: 5px; 
            -webkit-overflow-scrolling: touch; 
        }
        .store-filters::-webkit-scrollbar { height: 4px; }
        .store-filters::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        .store-filter-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: #aaa;
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: 0.3s;
            display: flex; align-items: center; gap: 6px; white-space: nowrap; flex-shrink: 0;
        }
        .store-filter-btn.active {
            background: linear-gradient(90deg, var(--primary), #00a2ff);
            color: #000;
            font-weight: 700;
            border-color: transparent;
            box-shadow: 0 0 15px rgba(0,242,255,0.3);
        }
        .store-filter-btn:hover:not(.active) { background: rgba(255,255,255,0.1); color: white; }

        /* Updated Grid for 2 columns per line */
        .store-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        @media (max-width: 500px) { .store-grid { grid-template-columns: 1fr; } } 

        .code-card { 
            background: var(--store-card-bg); 
            border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 16px; 
            padding: 15px; 
            text-align: center; 
            transition: 0.3s; 
            display: flex; flex-direction: column; justify-content: space-between; 
            position: relative; overflow: hidden;
            cursor: pointer; 
        }
        .code-card:hover { transform: translateY(-5px); border-color: rgba(255,255,255,0.2); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        .code-img-wrapper { position: relative; border-radius: 10px; overflow: hidden; margin-bottom: 12px; height: 140px; border: 1px solid rgba(255,255,255,0.05); pointer-events: none; }
        .code-card img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.7); transition: 0.3s; }
        .code-card:hover img { filter: brightness(1); transform: scale(1.05); }
        
        .lock-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: var(--store-gold); font-size: 1.8rem; z-index: 2; text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            pointer-events: none; 
        }

        .code-title { color: white; font-size: 0.95rem; font-weight: 600; margin-bottom: 8px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; pointer-events: none; }
        
        .code-price { 
            display: flex; align-items: center; justify-content: center; gap: 6px; 
            color: var(--store-gold); font-size: 1rem; font-weight: 700; margin-bottom: 15px; pointer-events: none;
        }

        .unlock-btn { 
            width: 100%; padding: 12px; border-radius: 50px; border: none; 
            font-weight: 800; cursor: pointer; font-size: 0.85rem; letter-spacing: 0.5px; 
            text-transform: uppercase; pointer-events: none; /* Let parent click handle it */
        }
        .unlock-btn.buy { 
            background: var(--store-btn-grad); color: #000; 
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2); 
        }
        .unlock-btn.buy:hover { box-shadow: 0 0 25px rgba(255, 193, 7, 0.5); }
        
        .unlock-btn.download { 
            background: var(--store-green-grad); color: #000; 
            box-shadow: 0 4px 15px rgba(0, 200, 83, 0.2); 
        }

        .unlock-btn.coupon { 
            background: linear-gradient(180deg, #bc13fe 0%, #6a0dad 100%); color: white; 
            box-shadow: 0 4px 15px rgba(188, 19, 254, 0.2); 
        }

        .comm-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; }
        .comm-btn { background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; text-align: center; text-decoration: none; color: white; display: flex; flex-direction: column; align-items: center; gap: 10px; border: 1px solid transparent; transition: 0.3s; font-size: 0.9rem; font-weight: 600; }
        .comm-btn:hover { border-color: var(--primary); background: rgba(255, 255, 255, 0.1); transform: translateY(-3px); }
        .comm-btn i { font-size: 1.8rem; margin-bottom: 5px; }
        
        .locked-wrapper { position: relative; }
        /* COMMUNITY LOCK OVERLAY */
        .community-lock-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(5, 5, 16, 0.9); backdrop-filter: blur(8px); z-index: 20; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; border-radius: 16px; border: 1px solid rgba(255, 0, 85, 0.3); }
        .community-lock-overlay h4 { color: #ff0055; font-size: 1.2rem; margin-bottom: 5px; }
        .community-lock-overlay p { color: #ccc; font-size: 0.9rem; margin-bottom: 15px; }

        .main-footer { margin-top: auto; background: rgba(5, 5, 16, 0.9); backdrop-filter: blur(10px); border-top: 1px solid rgba(0, 242, 255, 0.3); box-shadow: 0 -5px 20px rgba(0, 242, 255, 0.05); padding: 40px 20px; text-align: center; position: relative; z-index: 10; }
        .footer-content { max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; gap: 15px; }
        .footer-logo { font-family: 'Montserrat', sans-serif; font-weight: 800; font-size: 1.4rem; background: var(--gradient-main); -webkit-background-clip: text; background-clip: text; color: transparent; letter-spacing: 1px; margin-bottom: 5px; }
        .footer-desc { color: #94a3b8; font-size: 0.9rem; max-width: 600px; line-height: 1.5; }
        .footer-socials { display: flex; gap: 20px; margin: 15px 0; }
        .footer-social-link { color: #ccc; font-size: 1.5rem; transition: 0.3s; }
        .footer-social-link:hover { color: var(--primary); transform: translateY(-3px); text-shadow: 0 0 10px var(--primary); }
        .footer-bottom { margin-top: 20px; font-size: 0.8rem; color: #64748b; border-top: 1px solid rgba(255, 255, 255, 0.05); padding-top: 20px; width: 100%; }

        /* TRACKING LIST */
        .track-list { display: flex; flex-direction: column; gap: 15px; }
        .track-item { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
        .track-status { font-size: 0.8rem; font-weight: bold; padding: 5px 10px; border-radius: 4px; text-transform: uppercase; }
        .status-submitted { background: rgba(0,162,255,0.2); color: #00a2ff; border: 1px solid #00a2ff; }
        .status-review { background: rgba(255,215,0,0.2); color: #ffd700; border: 1px solid #ffd700; }
        .status-approved { background: rgba(0,255,136,0.2); color: #00ff88; border: 1px solid #00ff88; }
        .status-rejected { background: rgba(255,0,85,0.2); color: #ff0055; border: 1px solid #ff0055; }
        .status-revision { background: rgba(255,136,0,0.2); color: #ff8800; border: 1px solid #ff8800; }
        
        /* DELIVERY TIMELINE (Flipkart Style) */
        .timeline-container { position: relative; padding-left: 20px; margin-top: 15px; border-left: 2px solid #333; }
        .timeline-step { position: relative; margin-bottom: 20px; padding-left: 20px; }
        .timeline-step::before { content: ''; position: absolute; left: -26px; top: 0; width: 10px; height: 10px; background: #333; border-radius: 50%; border: 2px solid #000; z-index: 2; }
        .timeline-step.active::before { background: #00ff88; box-shadow: 0 0 10px #00ff88; }
        .timeline-step.active h5 { color: #00ff88; }
        .timeline-step h5 { color: #888; margin-bottom: 3px; font-size: 0.9rem; }
        .timeline-step p { color: #555; font-size: 0.8rem; }
        .timeline-step.active p { color: #ccc; }


        /* TOAST & CROP */
        #toast { visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 9999; left: 50%; bottom: 30px; transform: translateX(-50%); border: 1px solid #fff; font-weight: bold; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        .error-toast { background: rgba(255, 0, 85, 0.95) !important; border-color: #ff0055 !important; }
        .success-toast { background: rgba(0, 255, 136, 0.95) !important; border-color: #00ff88 !important; }
        .info-toast { background: rgba(0, 162, 255, 0.95) !important; border-color: #00a2ff !important; }
        
        .crop-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 6000; display: none; align-items: center; justify-content: center; flex-direction: column; padding: 20px; }
        .crop-container { width: 100%; max-width: 500px; height: 60vh; background: #111; margin-bottom: 20px; border-radius: 10px; overflow: hidden; border: 1px solid var(--primary); }
        .crop-container img { max-width: 100%; }
        .crop-actions { display: flex; gap: 15px; }

        /* =========================================
           REALISTIC SCRATCH CARD MODAL (UPDATED)
           ========================================= */
        .scratch-modal-content { 
            max-width: 400px; width: 90%; 
            background: linear-gradient(135deg, #101020 0%, #000000 100%);
            border: 2px solid #ffd700; border-radius: 20px;
            text-align: center; padding: 30px;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.15), 0 0 0 5px rgba(255, 215, 0, 0.1);
            position: relative;
            display: flex; flex-direction: column; align-items: center;
        }

        .scratch-area-wrapper {
            position: relative; 
            width: var(--scratch-width); 
            height: var(--scratch-height); 
            margin: 25px auto;
            border-radius: var(--scratch-radius); 
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            overflow: hidden; /* Important for border radius */
        }

        /* Bottom Layer (Prize) */
        .prize-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background: linear-gradient(135deg, #FFD700, #FFA500); /* Gold Gradient */
            color: #4B3621; /* Dark Brown Text */
            border-radius: var(--scratch-radius);
            text-align: center;
            z-index: 1;
        }

        .prize-layer .congrats {
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem; font-weight: 600; margin: 0;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.3);
        }

        .prize-layer .prize-amount {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem; font-weight: 900; margin: 5px 0 0; text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .prize-layer i { margin-bottom: 5px; font-size: 2.5rem; }

        /* Top Layer (Canvas) */
        #scratchCanvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border-radius: var(--scratch-radius);
            z-index: 2;
            cursor: grab;
            transition: opacity 0.7s ease-in-out;
            touch-action: none;
        }
        
        #scratchCanvas:active { cursor: grabbing; }
        
        #scratchCanvas.cleared { opacity: 0; pointer-events: none; }
        
        /* NEW: AVATAR SELECTION STYLES */
        /* MODIFICATION: Title shrinks to fit */
        #avatarSelectionPage .gradient-text {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            white-space: nowrap;
        }
        .avatar-selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .avatar-option {
            border: 3px solid transparent;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .avatar-option:hover {
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.5);
        }
        .avatar-option.selected {
            border-color: var(--primary);
            box-shadow: 0 0 20px var(--primary);
        }
        .avatar-option img {
            width: 100%;
            /* FIX: Ensure uniform size for all avatars */
            aspect-ratio: 1 / 1;
            display: block;
            border-radius: 50%;
            object-fit: cover;
        }
        .custom-upload-card {
            background: rgba(255,255,255,0.05);
            border: 2px dashed rgba(255,255,255,0.2);
            padding: 30px;
            text-align: center;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .custom-upload-card:hover {
            background: rgba(0,242,255,0.1);
            border-color: var(--primary);
        }
        .custom-upload-card i {
            font-size: 2.5rem; color: var(--primary); margin-bottom: 15px;
        }

        /* =========================================
           NEW DONATION PAGE STYLES
           ========================================= */
        .donation-content-wrapper { max-width: 700px; margin: 0 auto; }
        .donation-title { text-align: center; font-size: 2.2rem; color: var(--primary); margin-bottom: 10px; }
        .donation-subtitle { text-align: center; font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 1.2rem; color: white; margin-bottom: 20px; }
        .donation-p { color: #ccc; line-height: 1.7; font-size: 0.95rem; margin-bottom: 15px; }
        .donation-section { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 16px; padding: 25px; margin-top: 30px; }
        .donation-section h2 { font-size: 1.3rem; margin-bottom: 15px; color: var(--primary); border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 10px; }
        .donation-list { list-style: none; padding-left: 0; }
        .donation-list li { padding-left: 25px; position: relative; margin-bottom: 10px; color: #ddd; }
        .donation-list li::before { content: 'âœ“'; color: #00ff88; position: absolute; left: 0; font-weight: bold; }
        .donation-list.simple { padding-left: 0; }
        .donation-list.simple li { padding-left: 0; display: flex; gap: 10px; }
        .donation-list.simple li::before { content: none; }
        .donation-notice { background: rgba(0, 242, 255, 0.05); border: 1px solid var(--primary); border-left: 4px solid var(--primary); border-radius: 10px; padding: 20px; margin-top: 30px; }
        .donation-notice.important { background: rgba(255, 215, 0, 0.05); border-color: #ffd700; }
        .donation-notice h4 { color: white; font-size: 1.1rem; margin-bottom: 10px; }
        .donation-auth-btns { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; }
        .donation-amount-selector { display: flex; flex-wrap: wrap; gap: 10px; }
        .donation-amount-btn { flex-grow: 1; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: white; border-radius: 8px; cursor: pointer; font-weight: 700; transition: 0.3s; }
        .donation-amount-btn:hover, .donation-amount-btn.active { background: var(--primary); color: #000; border-color: var(--primary); }
        .receipt-list li { justify-content: space-between; border-bottom: 1px dashed rgba(255,255,255,0.1); padding-bottom: 8px; }
        .receipt-list li span:first-child { color: #aaa; }
        .receipt-list li span:last-child { font-weight: 600; color: white; }
        
        /* NEW STYLES for SCC Review Page */
        .review-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .review-card { background: var(--card-bg); border-left: 4px solid var(--primary); border-radius: 10px; padding: 20px; }
        .review-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .review-stars { color: #ffd700; }
        .review-card p { color: #ccc; line-height: 1.6; font-style: italic; }
        .review-card footer { margin-top: 15px; text-align: right; color: #888; font-size: 0.85rem; }


        @media (max-width: 768px) {
            .nav-links { display: none; }
            .menu-toggle-btn { display: block; }
            .hero-content h1 { font-size: 2.5rem; }
            .hero-btns { flex-direction: column; padding: 0 40px; }
            .btn { width: 100%; }
            .dash-grid { grid-template-columns: 1fr; }
            
            .project-modal-box { padding: 20px; width: 100%; border-radius: 0; min-height: 100vh; }
            .split-circle { width: 120px; height: 120px; }
            .suspension-card { width: 100%; padding: 20px; }
            .suspension-cross { font-size: 4rem; }
            
            /* Responsive Scratch Card */
            :root { --scratch-width: 280px; --scratch-height: 170px; }
        }
    </style>
</head>

<body>

    <!-- Animated Canvas Background -->
    <canvas id="canvas-bg"></canvas>

    <!-- SUSPENSION FULL SCREEN OVERLAY -->
    <div class="suspension-full-screen" id="suspensionOverlay">
        <div class="suspension-card">
            <i class="fas fa-ban suspension-cross"></i>
            <h1 style="color: white; font-family: 'Montserrat', sans-serif; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 3px; font-weight: 800;">ACCOUNT SUSPENDED</h1>
            
            <div style="background: rgba(255,0,0,0.1); border: 1px solid red; padding: 15px; margin: 20px 0; border-radius: 8px;">
                <p style="color: #ffaaaa; font-size: 0.9rem;">REASON:</p>
                <h3 style="color: white; margin-top: 5px;" id="suspensionReasonText">POLICY VIOLATION</h3>
            </div>
            
            <p style="color: #ccc; margin-bottom: 20px; line-height: 1.6;">
                Your account has been restricted. Access to features is revoked.
                <br><span id="suspensionTimer" style="color: #ffd700; font-weight: bold;"></span>
            </p>

            <!-- Buttons Dynamic based on status -->
            <div id="appealSection">
                <button class="appeal-btn" onclick="openFullPageForm('Suspension Appeal')">FILE APPEAL &rarr;</button>
            </div>
            <div id="appealPendingSection" style="display:none; color: #00ff88; font-weight: bold; margin-top: 20px;">
                <i class="fas fa-clock"></i> APPEAL UNDER REVIEW (24-72 HRS)
            </div>
            <div id="bannedMessage" style="display:none; color: red; font-weight: bold; margin-top: 20px;">
                <i class="fas fa-times-circle"></i> PERMANENT BAN - NO APPEAL
            </div>
            
             <button onclick="logout()" style="background: transparent; border: none; color: #666; margin-top: 30px; cursor: pointer; text-decoration: underline;">Logout</button>
        </div>
    </div>

    <!-- MAIN WEBSITE WRAPPER -->
    <div id="main-website">
        <!-- Header -->
        <header>
            <div class="container">
                <nav>
                    <a href="#home" class="logo">
                        <img src="https://i.ibb.co/MkstMhDD/IMG-20251123-172903-013.webp" alt="SCC Logo" class="logo-img">
                        <div>SCC <span class="beta-box">BETA</span></div>
                    </a>
                    <div class="nav-links">
                        <a href="#home">Home</a>
                        <a href="#about">About</a>
                        <a href="#join">Join</a>
                        <a href="#insights">Insights</a>
                        <a href="javascript:void(0)" onclick="openFullPageForm('Contact SCC')">Contact</a>
                        <div class="nav-dropdown">
                            <a class="dropdown-toggle">More <i class="fas fa-caret-down"></i></a>
                            <div class="nav-dropdown-content">
                                <a href="javascript:void(0)" onclick="openLegalPage('Privacy Policy')">Privacy Policy</a>
                                <a href="javascript:void(0)" onclick="openLegalPage('Terms and Conditions')">Terms & Conditions</a>
                                <a href="javascript:void(0)" onclick="openLegalPage('Community Rules')">Community Rules</a>
                                <a href="javascript:void(0)" onclick="openFounder()">Founder's Message</a>
                            </div>
                        </div>
                    </div>
                    <div class="menu-toggle-btn" onclick="openSidebar()"><i class="fas fa-bars"></i></div>
                </nav>
            </div>
        </header>

        <!-- SIDEBAR -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo"><span style="color:white; font-size:1.2rem;">SCC MENU</span></div>
                <div class="close-btn" onclick="closeSidebar()"><i class="fas fa-times"></i></div>
            </div>
            
            <div class="sidebar-menu">
                <a href="#home" class="menu-item" onclick="closeSidebar()"><i class="fas fa-home"></i> HOME</a>
                <a href="#about" class="menu-item" onclick="closeSidebar()"><i class="fas fa-info-circle"></i> ABOUT</a>
                <a href="#join" class="menu-item" onclick="closeSidebar()"><i class="fas fa-user-plus"></i> JOIN DEVS</a>
                <a href="#insights" class="menu-item" onclick="closeSidebar()"><i class="fas fa-chart-pie"></i> INSIGHTS</a>

                <!-- MODIFICATION: New Links added to Sidebar -->
                <div class="menu-category">EXPLORE</div>
                <a href="javascript:void(0)" class="menu-item" onclick="openPublicStore(); closeSidebar()"><i class="fas fa-crown"></i> PREMIUM STORE</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openDonationPage(); closeSidebar()"><i class="fas fa-heart"></i> SUPPORT US</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openSccReviewPage(); closeSidebar()"><i class="fas fa-star-half-alt"></i> SCC REVIEW</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openArticlePage('Articles'); closeSidebar()"><i class="fas fa-newspaper"></i> ARTICLES</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openArticlePage('Blogs'); closeSidebar()"><i class="fas fa-blog"></i> BLOGS</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openArticlePage('Insights'); closeSidebar()"><i class="fas fa-lightbulb"></i> INSIGHTS</a>

                <div class="menu-category">SUPPORT & BUILD</div>
                <a href="javascript:void(0)" class="menu-item" onclick="openFullPageForm('Contact SCC'); closeSidebar()"><i class="fas fa-envelope"></i> CONTACT</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openFullPageForm('Report a Problem'); closeSidebar()"><i class="fas fa-bug"></i> REPORT PROBLEM</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openFullPageForm('Request a Feature'); closeSidebar()"><i class="fas fa-lightbulb"></i> REQUEST FEATURE</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openFullPageForm('Feedback'); closeSidebar()"><i class="fas fa-comment-dots"></i> FEEDBACK</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openFullPageForm('Join as Volunteer'); closeSidebar()"><i class="fas fa-hands-helping"></i> JOIN AS VOLUNTEER</a>
                
                <a href="javascript:void(0)" class="menu-item" onclick="openBuildRequestPage(); closeSidebar()"><i class="fas fa-rocket"></i> BUILD WEBSITE/APP</a>

                <div class="menu-category">LEGAL & OTHERS</div>
                <a href="javascript:void(0)" class="menu-item" onclick="openLegalPage('Privacy Policy'); closeSidebar()"><i class="fas fa-user-shield"></i> PRIVACY POLICY</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openLegalPage('Terms and Conditions'); closeSidebar()"><i class="fas fa-file-contract"></i> TERMS & CONDITIONS</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openLegalPage('Community Rules'); closeSidebar()"><i class="fas fa-gavel"></i> COMMUNITY RULES</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openLegalPage('Anti-Abuse Policy'); closeSidebar()"><i class="fas fa-shield-alt"></i> ANTI-ABUSE POLICY</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openDonationListPage(); closeSidebar()"><i class="fas fa-list"></i> DONATION LIST</a>
                <a href="javascript:void(0)" class="menu-item" onclick="openFounder(); closeSidebar()"><i class="fas fa-microphone-alt" style="color:#ff00ff;"></i> FOUNDERâ€™S MESSAGE</a>

                <a href="javascript:void(0)" class="menu-item menu-login-btn" onclick="openLogin(); closeSidebar()">
                    <i class="fas fa-sign-in-alt"></i> MEMBER LOGIN
                </a>
            </div>
        </div>

        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Join Indiaâ€™s Biggest<br><span class="gradient-text">Youth Tech Community</span></h1>
                    <p>1 Million future developers. One vision. Zero salary politics. Only pure opportunity.</p>
                    <div class="hero-btns">
                        <a href="#join" class="btn btn-primary"><i class="fas fa-code"></i> Join as Developer</a>
                        <a href="javascript:void(0)" onclick="openLogin()" class="btn btn-outline"><i class="fas fa-user-plus"></i> Become Member</a>
                        <a href="javascript:void(0)" onclick="openBuildRequestPage()" class="btn btn-build"><i class="fas fa-rocket"></i> Build My Website/App</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about">
            <div class="container">
                <div class="glass-card" style="text-align: center; padding-bottom: 50px;">
                    <h2 class="section-title">About <span class="gradient-text">SCC</span></h2>
                    <p style="max-width: 800px; margin: 0 auto 40px auto; line-height: 1.6;">
                        SCC (Sazzidul Corporation Community) is Indiaâ€™s first youth-led community brand. Our mission is to unite 1 million young developers, creators, and problem-solvers to build apps, solve real Indian problems, and create a tech ecosystem that changes the country. No contracts. No fake promises. Only collaboration, creativity, and impact.
                    </p>

                    <div class="story-box" style="border: 2px solid var(--primary); border-radius: 16px; padding: 30px; max-width: 500px; margin: 40px auto 0 auto; background: rgba(0,0,0,0.2);">
                        <i class="fas fa-book-open" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 15px;"></i>
                        <h3 style="font-family: 'Montserrat', sans-serif; font-size: 1.5rem; margin-bottom: 10px;">The SCC Story</h3>
                        <p style="color: var(--text-muted); margin-bottom: 25px;">The journey of a 17-year-old founder building India's future.</p>
                        <a href="javascript:void(0)" onclick="openStoryModal()" class="btn" style="background: transparent; border: 2px solid var(--accent); color: var(--accent);">READ FULL STORY &rarr;</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section>
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-number" id="liveMemberCount" data-target="0">0</span>
                    <span class="stat-label">Members</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="appsPublicCount" data-target="0">0</span>
                    <span class="stat-label">Apps Public</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="revenueCount" data-target="0">0</span>
                    <span class="stat-label">Revenue</span>
                </div>
            </div>
        </section>

        <!-- Revenue Model -->
        <section id="projects">
            <div class="container">
                <h2 class="section-title">Revenue <span class="gradient-text">Model</span></h2>
                <div class="glass-card">
                    <h3 style="text-align: center;">Transparent System (50/30/20)</h3>
                    <div class="revenue-split">
                        <div class="split-circle main-share"><span data-target="50">0%</span><p style="color: #00f2ff; font-weight: bold;">Developer</p></div>
                        <div class="split-circle brand-share"><span data-target="30" style="color: var(--secondary);">0%</span><p>Brand Growth</p></div>
                        <div class="split-circle comm-share"><span data-target="20" style="color: var(--accent);">0%</span><p>Community</p></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mission -->
        <section id="mission">
            <div class="container">
                <h2 class="section-title">Our <span class="gradient-text">Mission</span></h2>
                <div class="community-grid">
                    <div class="glass-card reveal-on-scroll"><i class="fas fa-mobile-alt fa-2x" style="color: var(--primary);"></i><h3 style="margin-top:10px;" data-loop-animate="1000">0+ Apps</h3></div>
                    <div class="glass-card reveal-on-scroll"><i class="fas fa-users fa-2x" style="color: var(--primary);"></i><h3 style="margin-top:10px;" data-loop-animate="1000000">0+ Youth</h3></div>
                    <div class="glass-card reveal-on-scroll"><i class="fas fa-chalkboard-teacher fa-2x" style="color: var(--primary);"></i><h3 style="margin-top:10px;">Zero-Cost</h3></div>
                    <div class="glass-card reveal-on-scroll"><i class="fas fa-wallet fa-2x" style="color: var(--accent);"></i><h3 style="margin-top:10px;">50% Earnings</h3></div>
                    <div class="glass-card reveal-on-scroll"><i class="fas fa-shield-alt fa-2x" style="color: var(--accent);"></i><h3 style="margin-top:10px;">Tech Army</h3></div>
                    <div class="glass-card reveal-on-scroll"><i class="fas fa-globe fa-2x" style="color: var(--accent);"></i><h3 style="margin-top:10px;">Superpower</h3></div>
                </div>
            </div>
        </section>
        
        <!-- NEW: Quick Links Section with "Mast" Design -->
        <section id="quick-links-body">
            <div class="container">
                <h2 class="section-title">Explore <span class="gradient-text">SCC</span></h2>
                <div style="display: flex; justify-content: center; align-items: center; gap: 30px; flex-wrap: wrap;">
                    
                    <a href="javascript:void(0)" onclick="openPublicStore()" class="mast-btn mast-premium">
                        <i class="fas fa-crown"></i>
                        <span>Premium Store</span>
                    </a>
                    
                    <a href="javascript:void(0)" onclick="openDonationPage()" class="mast-btn mast-support">
                        <i class="fas fa-heart"></i>
                        <span>Support Us</span>
                    </a>
                    
                    <a href="javascript:void(0)" onclick="openSccReviewPage()" class="mast-btn mast-review">
                        <i class="fas fa-star-half-alt"></i>
                        <span>SCC Review</span>
                    </a>

                </div>
            </div>
        </section>

        <!-- Community Ecosystem -->
        <section id="community">
            <div class="container">
                <h2 class="section-title">Community <span class="gradient-text">Ecosystem</span></h2>
                <div class="community-grid">
                    <div class="eco-card"><span class="role-badge" style="color: var(--primary); border: 1px solid var(--primary);">Developer</span><h3>Build & Earn</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: var(--accent); border: 1px solid var(--accent);">Tester</span><h3>Test & Improve</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: white; border: 1px solid white;">Student</span><h3>Learn & Grow</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: #ff007f; border: 1px solid #ff007f;">Designer</span><h3>UI/UX & Graphics</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: #ffd700; border: 1px solid #ffd700;">Ideator</span><h3>Problem Solver</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: #ff4500; border: 1px solid #ff4500;">Creator</span><h3>Video + Blog</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: #00fa9a; border: 1px solid #00fa9a;">Mentor</span><h3>Expert / Senior</h3></div>
                    <div class="eco-card"><span class="role-badge" style="color: #1e90ff; border: 1px solid #1e90ff;">Ambassador</span><h3>Community Lead</h3></div>
                </div>
            </div>
        </section>

        <!-- JOIN FORM -->
        <section id="join">
            <div class="container">
                <h2 class="section-title">Join The <span class="gradient-text">Community</span></h2>
                <p class="section-subtitle">No Agreement. No Force. Just Code.</p>
                <div class="form-container">
                    <form id="joinForm">
                        <div class="form-group"><label>Full Name <span class="text-danger">*</span></label><input type="text" class="form-control" id="joinName" placeholder="Enter your full name" required></div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group"><label>Email Address<span class="text-danger">*</span></label><input type="email" class="form-control" id="joinEmail" placeholder="hello@gmail.com" required></div>
                            <div class="form-group"><label>Phone Number<span class="text-danger">*</span></label><input type="tel" class="form-control" id="joinPhone" placeholder="10-digit mobile number" required pattern="[6-9]{1}[0-9]{9}" title="Please enter a valid 10-digit Indian mobile number."></div>
                        </div>
                        <div class="form-group">
                            <label>Create Password <span class="text-danger">*</span></label>
                            <input type="password" class="form-control" id="joinPass" placeholder="Min 6 chars, 1 capital letter" required>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="form-group"><label>Age <span class="text-danger">*</span></label><input type="number" class="form-control" id="joinAge" placeholder="18" required></div>
                            <div class="form-group"><label>Experience <span class="text-danger">*</span></label>
                                <select class="form-control" id="joinExp">
                                    <option style="background:#000;">Fresher (0-1 Year)</option>
                                    <option style="background:#000;">Junior (1-3 Years)</option>
                                    <option style="background:#000;">Mid-Level (3-5 Years)</option>
                                    <option style="background:#000;">Senior (5+ Years)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Primary Tech Skills <span class="text-danger">*</span></label>
                            <select class="form-control" id="joinSkill" required>
                                <option value="" disabled selected style="background:#000;">Select your primary skill</option>
                                <option style="background:#000;" value="Web Development">ðŸ’» Web Development</option>
                                <option style="background:#000;" value="App Development">ðŸ“± App Development</option>
                                <option style="background:#000;" value="AI / Machine Learning">ðŸ§  AI / Machine Learning</option>
                                <option style="background:#000;" value="Data Science">ðŸ“Š Data Science</option>
                                <option style="background:#000;" value="Backend Development">âš™ï¸ Backend Development</option>
                                <option style="background:#000;" value="Cloud Computing">â˜ï¸ Cloud Computing</option>
                                <option style="background:#000;" value="Database Management">ðŸ—„ Database Management</option>
                                <option style="background:#000;" value="UI / UX Design">ðŸŽ¨ UI / UX Design</option>
                                <option style="background:#000;" value="DevOps & Tools">ðŸ” DevOps & Tools</option>
                                <option style="background:#000;" value="Automation">ðŸ¤– Automation</option>
                                <option style="background:#000;" value="Blockchain / Web3">ðŸ”— Blockchain / Web3</option>
                                <option style="background:#000;" value="Cyber Security">ðŸ›¡ Cyber Security</option>
                                <option style="background:#000;" value="No-Code / Low-Code">ðŸ§© No-Code / Low-Code</option>
                                <option style="background:#000;" value="Other">âœï¸ Other</option>
                            </select>
                        </div>
                        <div class="form-group"><label>Portfolio / GitHub (Optional)</label><input type="url" class="form-control" id="joinPort" placeholder="https://github.com/username"></div>
                        <div class="form-group"><label>Why join SCC? <span class="text-danger">*</span></label><textarea class="form-control" id="joinReason" rows="3" placeholder="Tell us your vision..." required></textarea></div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" required>
                                <span style="font-size: 0.9rem;">I accept the open collaboration terms. <span class="text-danger">*</span></span>
                            </label>
                        </div>
                        <button type="submit" class="submit-btn-glow">Submit & Get SCC ID</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Insights (REDESIGNED) -->
        <section id="insights">
            <div class="container">
                <h2 class="section-title">Latest <span class="gradient-text">Insights</span></h2>
                <p class="section-subtitle">Stay informed, stay ahead. Explore what's new in the SCC ecosystem.</p>
                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-card-header">
                            <i class="fas fa-crown insight-card-icon" style="color: #ffd700;"></i>
                            <h4>Premium Store</h4>
                        </div>
                        <p>Access premium source codes, UI kits, templates, ebooks, and digital resources built for developers and creators.</p>
                        <div class="insight-card-footer">Free resources are available for members inside the dashboard.</div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-card-header">
                            <i class="fas fa-heart insight-card-icon" style="color: #00ff88;"></i>
                            <h4>Support Us</h4>
                        </div>
                        <p>Support the SCC community through voluntary contributions. Your support helps us maintain infrastructure, create free learning resources, and grow the community.</p>
                    </div>
                    <div class="insight-card">
                        <div class="insight-card-header">
                            <i class="fas fa-newspaper insight-card-icon" style="color: var(--secondary);"></i>
                            <h4>Articles</h4>
                        </div>
                        <p>Read daily articles on technology, AI, development, careers, and community updates. Stay informed. Stay ahead.</p>
                    </div>
                    <div class="insight-card">
                        <div class="insight-card-header">
                            <i class="fas fa-blog insight-card-icon" style="color: var(--accent);"></i>
                            <h4>Blogs</h4>
                        </div>
                        <p>In-depth blogs, tutorials, and real-world insights shared by the SCC team and community members.</p>
                    </div>
                    <div class="insight-card" style="grid-column: 1 / -1;">
                        <div class="insight-card-header">
                            <i class="fas fa-lightbulb insight-card-icon"></i>
                            <h4>Insights</h4>
                        </div>
                        <p>Trends, opinions, research, and future-focused insights on technology and innovation.</p>
                    </div>
                </div>
            </div>
        </section>


        <!-- Footer (REDESIGNED) -->
        <footer id="contact">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>SCC</h4>
                    <p>Sazzidul Corporation Community â€“ Building the Future, One Line of Code at a Time.</p>
                </div>
                <div class="footer-column">
                    <h4>Support</h4>
                    <ul class="footer-links">
                        <li><a onclick="openFullPageForm('Contact SCC')">Contact</a></li>
                        <li><a onclick="openFullPageForm('Report a Problem')">Report a Problem</a></li>
                        <li><a onclick="openFullPageForm('Request a Feature')">Request a Feature</a></li>
                        <li><a onclick="openFullPageForm('Feedback')">Feedback</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Legal & Rules</h4>
                    <ul class="footer-links">
                        <li><a onclick="openLegalPage('Privacy Policy')">Privacy Policy</a></li>
                        <li><a onclick="openLegalPage('Terms and Conditions')">Terms & Conditions</a></li>
                        <li><a onclick="openLegalPage('Community Rules')">Community Rules</a></li>
                        <li><a onclick="openLegalPage('Anti-Abuse Policy')">Anti-Abuse Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Navigation</h4>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#join">Join Us</a></li>
                        <li><a href="#community">Community</a></li>
                        <li><a onclick="openLogin()">Member Login</a></li>
                    </ul>
                    <!-- FIX: Explore links moved here -->
                    <h4 style="margin-top: 30px;">Explore</h4>
                     <ul class="footer-links">
                        <li><a onclick="openPublicStore()">Premium Store</a></li>
                        <li><a onclick="openDonationPage()">Support Us</a></li>
                        <li><a onclick="openSccReviewPage()">SCC Review</a></li>
                        <li><a onclick="openArticlePage('Articles')">Articles</a></li>
                        <li><a onclick="openArticlePage('Blogs')">Blogs</a></li>
                        <li><a onclick="openArticlePage('Insights')">Insights</a></li>
                    </ul>
                    <div class="footer-social">
                        <a href="https://www.facebook.com/Sazzidulcorporation" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/sazzidul_corporation?igsh=MXJqMjg5czRmM3k5aA==" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://youtube.com/@sazzidulcorporation?si=rqMT4MXUy3SutTfT" target="_blank"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">&copy; 2025 Sazzidul Corporation â€“ All Rights Reserved</div>
        </footer>
    </div> 
    <!-- END MAIN WEBSITE -->

    <!-- ==============================================
 MODALS & FULL PAGES
 ============================================== -->

    <!-- 1. LEGAL PAGE VIEWER -->
    <div id="legalPageModal" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo" id="legalPageTitle">Policy</div>
            <button class="story-close-btn" onclick="closeLegalPage()">Close X</button>
        </div>
        <div class="container page-container">
            <h1 id="legalHeading" class="gradient-text" style="font-size: 2.5rem; text-align: center; margin-bottom: 30px;">Title</h1>
            <div class="cool-box">
                <p style="color:#a0a0a0; font-size:0.9rem;" id="legalDateText">Last Updated: Loading...</p>
            </div>
            <div id="legalContentArea" class="legal-text-content">
                <div style="text-align:center; padding:50px;">
                    <i class="fas fa-circle-notch fa-spin fa-2x" style="color:var(--primary);"></i>
                    <p style="margin-top:20px;">Loading content from server...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. BUILD REQUEST VIEWER (UPDATED OPTIONS & ID GEN) -->
    <div id="buildRequestPage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">Build My Website</div>
            <button class="story-close-btn" onclick="closeBuildRequestPage()">Close X</button>
        </div>
        <div class="container page-container">
            <div class="glass-card" style="max-width: 600px; margin: 0 auto; border-top: 4px solid var(--build-btn);">
                <h2 style="text-align: center; margin-bottom: 20px; color:white;">Start Your <span style="color:var(--build-btn);">Project</span></h2>
                <p style="text-align: center; color: #aaa; margin-bottom: 30px;">Fill this form to get a professional website or app built by SCC Developers.</p>
                <form id="buildRequestForm">
                    <div class="form-group"><label>Client Name</label><input type="text" class="form-control" id="buildName" required></div>
                    <div class="form-group"><label>Contact Number</label><input type="tel" class="form-control" id="buildPhone" required></div>
                    <div class="form-group">
                        <label>Project Type</label>
                        <select class="form-control" id="buildType">
                            <option style="background:#000;">Website</option>
                            <option style="background:#000;">Website + Admin Panel</option>
                            <option style="background:#000;">Website + Application</option>
                            <option style="background:#000;">Application</option>
                        </select>
                    </div>
                    <div class="form-group"><label>Budget Estimate (â‚¹)</label><input type="number" class="form-control" id="buildBudget"></div>
                    <div class="form-group"><label>Project Details</label><textarea class="form-control" id="buildDesc" rows="4" placeholder="Describe what you need..."></textarea></div>
                    <button type="submit" class="btn btn-build" style="width: 100%; border-radius: 8px;">Submit Request</button>
                </form>
            </div>
        </div>
    </div>

    <!-- 3. UNIVERSAL FULL PAGE FORM (UPDATED VALIDATIONS) -->
    <div id="universalPageForm" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo" id="universalPageTitle">Support</div>
            <button class="story-close-btn" onclick="closeFullPageForm()">Close X</button>
        </div>
        <div class="container page-container">
            <div class="glass-card" style="max-width: 600px; margin: 20px auto; border-top: 4px solid var(--primary);">
                <div id="universalFormBody">
                    <h2 style="text-align: center; margin-bottom: 20px;" id="universalFormHeading">Support Form</h2>
                    <form id="genericForm">
                        <div class="form-group"><label>Your Name</label><input type="text" class="form-control" id="genName" placeholder="Full Name (Optional)"></div>
                        <div class="form-group" id="genIdContainer"><label>SCC ID</label><input type="text" class="form-control" id="genID" placeholder="Enter SCC ID (If Member)"></div>
                        <div id="genFeedbackExtra" style="display:none; text-align:center;">
                            <label>Rate Your Experience</label>
                            <div class="rating-stars" id="starContainer">
                                <i class="fas fa-star" data-val="1"></i><i class="fas fa-star" data-val="2"></i><i class="fas fa-star" data-val="3"></i><i class="fas fa-star" data-val="4"></i><i class="fas fa-star" data-val="5"></i>
                            </div>
                            <input type="hidden" id="genRating" value="0">
                        </div>
                        <div id="genVolunteerExtra" style="display:none;">
                            <div class="form-group">
                                <label>How can you help?</label>
                                <select class="form-control" id="volRole">
                                    <option style="background:#000;">Event Management</option><option style="background:#000;">Community Moderator</option><option style="background:#000;">Graphic Design</option><option style="background:#000;">Content Writing</option><option style="background:#000;">Coding Mentor</option>
                                </select>
                            </div>
                        </div>

                        <!-- SUSPENSION APPEAL SPECIFIC FIELDS -->
                        <div id="genAppealExtra" style="display:none;">
                            <div class="appeal-warning"><i class="fas fa-exclamation-triangle"></i> False claims may lead to a permanent ban. Be honest.</div>
                            <div class="form-group">
                                <label>Reason for Appeal</label>
                                <select class="form-control" id="appealReasonSelect" style="background:#000;">
                                    <option value="Mistake">I believe this is a mistake</option>
                                    <option value="Ignorance">I didnâ€™t know the rule</option>
                                    <option value="Misused">Account was misused by someone else</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- IDEA SUBMISSION EXTRA -->
                        <div id="genIdeaExtra" style="display:none;">
                            <div class="form-group">
                                <label>Idea Title</label>
                                <input type="text" class="form-control" id="ideaTitle" placeholder="Short title for your idea">
                            </div>
                             <div class="form-group">
                                <label>Link (YouTube/Drive) - Optional</label>
                                <input type="url" class="form-control" id="ideaLink" placeholder="https://youtube.com/...">
                            </div>
                            <p style="color:#aaa; font-size:0.8rem; margin-bottom:10px;">Describe your idea below. Min 100 characters.</p>
                        </div>

                        <div class="form-group appeal-textarea-container">
                            <label>Message / Explanation</label>
                            <textarea class="form-control" id="genMsg" rows="5" placeholder="Write your message here..." required></textarea>
                            <div class="char-count" id="charCountDisplay">0 / 900</div>
                        </div>

                        <input type="hidden" id="genCategory"><button type="submit" class="submit-btn-glow">Submit Request</button>
                    </form>
                </div>
                <div id="universalFormSuccess" style="display:none;" class="support-success-box">
                    <i class="fas fa-check-circle"></i><h2>Request Received!</h2><p style="color:#aaa; margin-top:10px;">Reply within 7 Days (for Appeals) or 24 hours (for Support).</p><button onclick="closeFullPageForm()" class="btn btn-outline" style="margin-top: 20px; width: 100%;">Close Window</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 4. LOGIN MODAL -->
    <div id="loginModal" class="story-modal" style="background: rgba(0,0,0,0.95); z-index: 6000;">
        <div class="story-header-bar">
            <div class="logo">Login</div><button class="story-close-btn" onclick="closeLogin()">Close X</button>
        </div>
        <div class="login-content">
            <h2 style="text-align: center; margin-bottom: 20px;">Member <span class="gradient-text">Login</span></h2>
            <form id="loginForm">
                <div class="form-group"><input type="text" class="form-control" id="loginUser" placeholder="SCC ID" required></div>
                <div class="form-group"><input type="password" class="form-control" id="loginPass" placeholder="Password" required></div>
                <button type="submit" class="submit-btn-glow">Access Dashboard</button>
            </form>
        </div>
    </div>

    <!-- 5. CREDENTIALS MODAL -->
    <div id="credsModal" class="story-modal" style="background: #000; z-index: 6001;">
        <div style="display: flex; align-items: center; justify-content: center; height: 100vh;">
            <div style="width: 100%; max-width: 450px; text-align: center; padding: 20px;">
                <h1 style="color: #00f2ff; font-weight: 800; font-size: 2.2rem; margin-bottom: 10px;">Welcome to SCC!</h1>
                <p style="color: #fff; margin-bottom: 30px;">Your SCC Identity has been generated.</p>
                <div class="creds-container">
                    <span class="creds-label" style="color:#aaa; display:block;">SCC ID</span>
                    <span class="creds-value" id="genUsername">LOADING...</span>
                    <hr style="border-color: #333; margin: 15px 0;">
                    <span class="creds-label" style="color:#aaa; display:block;">PASSWORD</span>
                    <span class="creds-value" id="genPassword">LOADING...</span>
                </div>
                <div style="background: rgba(255,0,0,0.2); border: 1px solid red; color: white; padding: 10px; margin-top: 20px; font-size: 0.8rem;">
                    âš ï¸ SCREENSHOT THIS NOW! You cannot recover this password later easily.
                </div>
                <button class="save-btn" onclick="openLoginFromCreds()">Login Now</button>
            </div>
        </div>
    </div>

    <!-- 6. FOUNDER/STORY MODALS -->
    <div id="founderModal" class="story-modal">
        <div class="story-header-bar">
            <div class="logo">Founder</div><button class="story-close-btn" onclick="closeFounder()">Close X</button>
        </div>
        <div class="story-content" id="founderContent"></div>
    </div>

    <div id="sccStoryModal" class="story-modal">
        <div class="story-header-bar">
            <div class="logo">The SCC Story</div><button class="story-close-btn" onclick="closeStoryModal()">Close X</button>
        </div>
        <div class="story-content" id="sccStoryContent"></div>
    </div>

    <!-- 7. FULL STORE PAGE (DASHBOARD VERSION) -->
    <div id="fullStorePage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">SCC Code Store</div>
            <button class="story-close-btn" onclick="closeFullStore()">Close X</button>
        </div>
        <div class="container page-container">
            <h2 class="section-title" style="font-size: 1.5rem; margin-bottom: 20px; text-align: left;">All Premium <span class="gradient-text">Codes</span></h2>
            
            <div class="store-filters">
                <div class="store-filter-btn active" onclick="filterStore('all', this)"><i class="fas fa-check-circle"></i> All</div>
                <div class="store-filter-btn" onclick="filterStore('premium', this)"><i class="fas fa-crown"></i> Premium</div>
                <div class="store-filter-btn" onclick="filterStore('locked', this)"><i class="fas fa-lock"></i> Locked</div>
                <div class="store-filter-btn" onclick="filterStore('unlocked', this)"><i class="fas fa-unlock"></i> Unlocked</div>
            </div>

            <div class="store-grid" id="fullStoreContent">
                <!-- Items injected here via JS -->
            </div>
        </div>
    </div>
    
    <!-- 8. PUBLIC PREMIUM STORE (NO LOGIN) -->
    <div id="publicStorePage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo"><i class="fas fa-crown" style="color:#ffd700;"></i> Premium Store</div>
            <button class="story-close-btn" onclick="closePublicStore()">Close X</button>
        </div>
        <div class="container page-container">
            
            <div class="store-filters" id="publicStoreFilters">
                <div class="store-filter-btn active" onclick="filterPublicStore('all', this)" data-category="all"><i class="fas fa-star"></i> All</div>
                <div class="store-filter-btn" onclick="filterPublicStore('ui-ux', this)" data-category="ui-ux"><i class="fas fa-palette"></i> UI/UX</div>
                <div class="store-filter-btn" onclick="filterPublicStore('website', this)" data-category="website"><i class="fas fa-globe"></i> Websites</div>
                <div class="store-filter-btn" onclick="filterPublicStore('app', this)" data-category="app"><i class="fas fa-mobile-alt"></i> Apps</div>
                <div class="store-filter-btn" onclick="filterPublicStore('course', this)" data-category="course"><i class="fas fa-graduation-cap"></i> Courses</div>
                <div class="store-filter-btn" onclick="filterPublicStore('ebook', this)" data-category="ebook"><i class="fas fa-book"></i> Ebooks</div>
                <div class="store-filter-btn" onclick="filterPublicStore('free', this)" data-category="free"><i class="fas fa-gift"></i> Free</div>
            </div>

            <div class="store-grid" id="publicStoreContent">
                <!-- JS will inject content here -->
            </div>
        </div>
    </div>

    <!-- 9. DONATION PAGE (REDESIGNED) -->
    <div id="donationPage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">Donate</div>
            <button class="story-close-btn" onclick="closeDonationPage()">Close X</button>
        </div>
        <div class="container page-container">
            <div class="donation-content-wrapper">
                <h1 class="donation-title">â¤ï¸ Support SCC Community</h1>
                <p class="donation-subtitle">Build. Learn. Grow â€” Together.</p>
                <p class="donation-p">SCC is a community-driven platform focused on learning, development, and innovation. Your donation helps us keep SCC active, accessible, and valuable for everyone.</p>
        
                <div class="donation-section">
                    <h2>ðŸ’¡ Why Donate to SCC?</h2>
                    <ul class="donation-list">
                        <li>Maintain servers & infrastructure</li>
                        <li>Build free learning resources</li>
                        <li>Support students & developers</li>
                        <li>Improve community tools & features</li>
                        <li>Keep SCC open, clean, and abuse-free</li>
                    </ul>
                    <p class="donation-p" style="font-style: italic; color: #aaa;">Donations are voluntary and meant purely for community support.</p>
                </div>
        
                <div class="donation-notice">
                    <h4>ðŸ”’ Who Can Donate?</h4>
                    <ul class="donation-list simple">
                        <li><span class="text-success" style="margin-left:0;">âœ…</span> Only logged-in & email-verified SCC members can donate</li>
                        <li><span class="text-danger" style="margin-left:0;">âŒ</span> Guest donations are not accepted</li>
                    </ul>
                    <p>Please login to continue.</p>
                    <div class="donation-auth-btns">
                        <a href="javascript:void(0)" onclick="openLogin(); closeDonationPage();" class="btn btn-primary">Login</a>
                        <a href="#join" onclick="closeDonationPage();" class="btn btn-outline">Create SCC Account</a>
                    </div>
                </div>
        
                <!-- MODIFIED DONATION AMOUNT SECTION -->
                <div class="donation-section">
                    <h2>ðŸ’° Choose Donation Amount</h2>
                    <p class="donation-p" style="color: #aaa;">Minimum donation: â‚¹50</p>
                    <div class="donation-amount-selector">
                        <button class="donation-amount-btn" data-amount="50">â‚¹50</button>
                        <button class="donation-amount-btn" data-amount="100">â‚¹100</button>
                        <button class="donation-amount-btn" data-amount="250">â‚¹250</button>
                        <button class="donation-amount-btn" data-amount="500">â‚¹500</button>
                    </div>
                    <input type="number" id="customDonationAmount" class="form-control" placeholder="Custom Amount (â‚¹50 or above)" style="margin-top: 15px;">
                    <textarea class="form-control" rows="3" placeholder="Message (optional): â€œWhy are you supporting SCC?â€" style="margin-top: 15px;"></textarea>
                    <div id="donateButtonContainer" style="display:none; margin-top: 20px;">
                        <button class="btn btn-primary" style="width:100%;" onclick="showToast('Donation feature is coming soon!', 'info')">Proceed to Donate <span id="donateAmountLabel"></span></button>
                    </div>
                </div>
                
                <div class="donation-section">
                    <h2>â¤ï¸ What You Get After Donating</h2>
                    <ul class="donation-list simple">
                        <li><span class="text-success" style="margin-left:0;">âœ…</span> Digital donation receipt</li>
                        <li><span class="text-success" style="margin-left:0;">âœ…</span> Donation history in your dashboard</li>
                        <li><span class="text-success" style="margin-left:0;">âœ…</span> â€œCommunity Supporterâ€ tag (optional)</li>
                        <li><span class="text-danger" style="margin-left:0;">âŒ</span> No coins</li>
                        <li><span class="text-danger" style="margin-left:0;">âŒ</span> No store access</li>
                        <li><span class="text-danger" style="margin-left:0;">âŒ</span> No special privileges</li>
                    </ul>
                    <p class="donation-p" style="font-weight: bold; color: #ffd700;">Donations do not unlock premium content.</p>
                </div>
        
                <div class="donation-section">
                    <h2>ðŸ§¾ Donation Receipt</h2>
                    <p class="donation-p">After successful donation, you will receive:</p>
                    <ul class="donation-list simple receipt-list">
                        <li><span>Donation ID:</span><span>Generated</span></li>
                        <li><span>SCC ID:</span><span>Your SCC ID</span></li>
                        <li><span>Donor Name:</span><span>Your Name</span></li>
                        <li><span>Email Address:</span><span>Your Email</span></li>
                        <li><span>Amount:</span><span>Donated Amount</span></li>
                        <li><span>Date & Time:</span><span>Transaction Time</span></li>
                        <li><span>Purpose:</span><span>Community Support</span></li>
                        <li><span>Status:</span><span class="text-success" style="margin-left:0;">Received</span></li>
                    </ul>
                    <p class="donation-p">Receipt will be available in: <strong>Dashboard â†’ My Donations</strong></p>
                </div>
                
                <div class="donation-section">
                    <h2>âš–ï¸ Transparency & Trust</h2>
                    <ul class="donation-list">
                        <li>All donations are recorded securely</li>
                        <li>Donations are non-refundable</li>
                        <li>SCC does not misuse or sell donor data</li>
                        <li>Donations are used only for community-related purposes</li>
                    </ul>
                </div>
                
                <div class="donation-notice important">
                    <h4>ðŸ“Œ Important Note</h4>
                    <p>Donating to SCC is completely optional. You can access SCC without donating. Your support helps us grow â€” but learning always comes first.</p>
                </div>
                
                <div style="text-align: center; margin-top: 40px; padding-bottom: 40px;">
                    <h3>ðŸ¤ Thank You for Supporting SCC</h3>
                    <p class="donation-p">Every contribution, big or small, helps strengthen the SCC community.</p>
                    <p class="donation-p" style="color: #aaa; margin-top: 20px;">Stay active. Stay learning. Stay building.<br>â€” Sazzidul Corporation (SCC)</p>
                </div>
        
            </div>
        </div>
    </div>

    <!-- 10. TRACKING REQUESTS PAGE -->
    <div id="trackingPage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">Track Requests</div>
            <button class="story-close-btn" onclick="closePage('trackingPage')">Close X</button>
        </div>
        <div class="container page-container">
            <h2 class="section-title" style="font-size: 1.5rem; margin-bottom: 20px; text-align: center;">My <span class="gradient-text">History (Last 30 Days)</span></h2>
            <div id="trackingListContent" class="track-list">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>
    
    <!-- 11. REALISTIC SCRATCH CARD MODAL (UPDATED) -->
    <div id="scratchModal" class="story-modal" style="background: rgba(0,0,0,0.9); z-index: 7000; align-items:center; justify-content:center; display:none;">
        <div class="scratch-modal-content" style="margin: auto; margin-top: 15vh;">
            <h3 style="color: #ffd700; font-family: 'Montserrat', sans-serif; font-size: 1.8rem; margin-bottom: 5px; text-shadow: 0 0 10px #ffd700;">DAILY BONUS</h3>
            <p style="color:#aaa; font-size: 0.9rem; margin-bottom: 20px;">Scratch carefully to reveal your daily surprise!</p>
            
            <div class="scratch-area-wrapper">
                <!-- Layer 1: Prize Text (Hidden under canvas) -->
                <div class="prize-layer" id="prizeLayer">
                    <h2 class="congrats">You Won!</h2>
                    <p id="prizeText" class="prize-amount">Loading...</p>
                </div>
                <!-- Layer 2: Scratchable Canvas -->
                <canvas id="scratchCanvas"></canvas>
            </div>
            
            <button onclick="closeScratchModal()" class="btn btn-outline" style="margin-top: 25px; border-color: #ffd700; color: #ffd700;">Close</button>
        </div>
    </div>
    
    <!-- NEW: Article Page -->
    <div id="articlePage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo" id="articlePageTitle">Articles</div>
            <button class="story-close-btn" onclick="closePage('articlePage')">Close X</button>
        </div>
        <div class="container page-container">
            <div id="articleContent" class="legal-text-content">
                <h1 class="gradient-text" style="text-align:center; margin-bottom: 2rem;">Coming Soon</h1>
                <p style="text-align:center; color: #aaa;">Our team is currently writing insightful articles, blogs, and case studies. Please check back later!</p>
            </div>
        </div>
    </div>

    <!-- NEW: Donation List Page (EMPTY) -->
    <div id="donationListPage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">Donation List</div>
            <button class="story-close-btn" onclick="closePage('donationListPage')">Close X</button>
        </div>
        <div class="container page-container">
            <h1 class="gradient-text" style="text-align:center;">Community Supporters</h1>
            <p class="section-subtitle">We are grateful to everyone who supports our mission.</p>
            <div class="glass-card" style="max-width: 600px; margin: auto;">
                <ul id="donationListContent" style="list-style: none; padding: 0;">
                    <li style="text-align:center; color:#666; padding: 20px;">No donations listed yet.</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- NEW: AVATAR SELECTION PAGE -->
    <div id="avatarSelectionPage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">Select Your Avatar</div>
            <button class="story-close-btn" onclick="closePage('avatarSelectionPage')">Done</button>
        </div>
        <div class="container page-container">
             <h1 class="gradient-text" style="text-align:center; margin-bottom: 1rem;">Choose Your Look</h1>
             <p class="section-subtitle">Select a predefined avatar or upload your own photo.</p>
             
             <div id="avatarGrid" class="avatar-selection-grid">
                 <!-- Predefined avatars will be injected here by JS -->
             </div>

             <div class="custom-upload-card" onclick="triggerPhotoUpload()">
                 <i class="fas fa-camera-retro"></i>
                 <h3 style="color: white; margin-bottom: 5px;">Upload Your Own</h3>
                 <p style="color: #aaa; font-size: 0.9rem;">Crop and use your custom photo.</p>
             </div>
        </div>
    </div>

    <!-- NEW: SCC REVIEW PAGE -->
    <div id="sccReviewPage" class="page-full-view">
        <div class="story-header-bar">
            <div class="logo">SCC Reviews</div>
            <button class="story-close-btn" onclick="closePage('sccReviewPage')">Close X</button>
        </div>
        <div class="container page-container">
            <h1 class="gradient-text" style="text-align:center;">Community Feedback</h1>
            <p class="section-subtitle">See what our members are saying about their experience.</p>
            <div id="reviewGridContent" class="review-grid">
                <!-- Reviews will be loaded here by JS -->
            </div>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast">Message here</div>

    <!-- ==============================================
 MAIN DASHBOARD
 ============================================== -->
    <div id="main-dashboard">
        <header class="dash-header">
            <div class="header-logo gradient-text">
                <img src="https://i.ibb.co/MkstMhDD/IMG-20251123-172903-013.webp" alt="SCC" style="width: 35px; border-radius: 50%; border:1px solid #00f2ff;">
                SCC DASHBOARD
            </div>
            <div class="header-actions">
                <button onclick="logout()" class="dash-btn-danger"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </header>

        <div class="dash-container">
            <div class="dash-notice-card">
                <h3><i class="fas fa-exclamation-triangle"></i> Notice: SCC Community Strict Activity Rule</h3>
                <p>To keep our community active, pure and loyal, SCC follows a strict activity policy.</p>
                <div class="notice-highlight">ðŸ”¸ If your account stays inactive for 150 consecutive days:</div>
                <ul class="dash-notice-list">
                    <li>Your SCC ID will be suspended automatically.</li>
                    <li>If you commit 3 Violations, your account will be Permanently Banned.</li>
                </ul>
                <p>We want only dedicated members who are serious about learning, building and growing with SCC.</p>
                <div class="notice-slogan">Stay active. Stay learning. Stay building.</div>
                <div class="notice-sign">â€” Sazzidul Corporation Community (SCC)</div>
            </div>

            <div class="dash-grid">
                <aside>
                    <div class="dash-glass-card profile-card">
                        <div class="profile-header">
                            <div class="profile-pic-container" onclick="openAvatarSelector()">
                                <img src="" alt="Profile" class="profile-pic" id="profilePic">
                                <div class="edit-icon"><i class="fas fa-pencil-alt"></i></div>
                            </div>
                            <input type="file" id="pfpInput" hidden accept="image/*">
                            <h2 class="user-name" id="userName" style="font-size: 1.4rem; font-weight: 700;">Loading...</h2>
                            <span class="user-id-pill" id="userId">...</span>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Profile Completion</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div class="progress-track">
                                <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                            </div>
                        </div>

                        <div class="badge-container">
                            <span class="badge-level" id="userLevel">BRONZE</span>
                            <span class="badge-status pending" id="userStatus">PENDING</span>
                        </div>
                        
                        <div class="coin-display-big">
                            <div style="font-size: 0.8rem; color: #94a3b8; margin-bottom: 5px;">TOTAL BALANCE</div>
                            <div class="coin-amount" id="coinBalanceContainer">
                                <img src="https://i.ibb.co/C3sJ51dX/file-00000000cb0c722fb4b03f2294c74630.png" class="dash-coin-icon large">
                                <span id="coinBalance">0</span>
                            </div>
                        </div>
                        <div style="text-align: center; color: #777; font-size: 0.75rem; margin-top: 10px;">
                            <i class="fas fa-info-circle"></i> Approval Reward: 40k Coins
                        </div>
                    </div>

                    <div class="dash-glass-card">
                        <h3 class="dash-card-title"><i class="fas fa-chart-line" style="color: var(--secondary);"></i> Activity Stats</h3>
                        <ul class="info-list">
                            <li><span>Logins:</span> <span class="val" id="loginCount">0</span></li>
                            <li><span>Active Today:</span> <span class="val" id="timeSpent">00m 00s</span></li>
                            <li><span>Spent:</span> <span class="val text-danger" id="coinsSpent">0</span></li>
                        </ul>
                    </div>
                </aside>

                <main>
                    <section class="dash-glass-card daily-reward-box">
                        <h2 class="gradient-text" style="font-size: 1.8rem; margin-bottom: 10px;">Daily Login Reward</h2>
                        <button class="reward-btn" id="claimBtn" onclick="claimDailyReward()">LOADING...</button>
                        <div id="claimTimer" style="margin-top: 10px; font-size: 0.9rem; color: var(--text-muted); display: none;">
                            Next claim in: <span id="timerVal" style="color: var(--primary); font-family: monospace; font-size: 1.2rem; font-weight: bold;"></span>
                        </div>
                    </section>

                    <section class="dash-glass-card">
                        <h3 class="dash-card-title">
                            <i class="fas fa-tasks" style="color: var(--primary);"></i> Social Tasks 
                            <span style="font-size: 0.8rem; margin-left: auto; color: var(--text-muted);" id="socialProgressText">0/4</span>
                        </h3>
                        <div class="task-list">
                            <div class="task-item active" id="task1" onclick="completeTask(1, 'https://youtube.com/@sazzidulcorporation')">
                                <div class="dash-flex-center"><i class="fab fa-youtube task-icon" style="color:#FF0000;"></i><div><h4 style="color:white;">Step 1: Subscribe YouTube</h4></div></div>
                                <div class="task-status"><i class="fas fa-unlock" id="icon1"></i></div>
                            </div>
                            <div class="task-item locked" id="task2" onclick="completeTask(2, 'https://facebook.com/Sazzidulcorporation')">
                                <div class="dash-flex-center"><i class="fab fa-facebook task-icon" style="color:#1877F2;"></i><div><h4 style="color:white;">Step 2: Follow Facebook</h4></div></div>
                                <div class="task-status"><i class="fas fa-lock" id="icon2"></i></div>
                            </div>
                            <div class="task-item locked" id="task3" onclick="completeTask(3, 'https://instagram.com/sazzidul_corporation')">
                                <div class="dash-flex-center"><i class="fab fa-instagram task-icon" style="color:#E1306C;"></i><div><h4 style="color:white;">Step 3: Follow Instagram</h4></div></div>
                                <div class="task-status"><i class="fas fa-lock" id="icon3"></i></div>
                            </div>
                            <div class="task-item locked" id="task4" onclick="completeTask(4, 'https://t.me/SazzidulCorporationCommunity')">
                                <div class="dash-flex-center"><i class="fab fa-telegram task-icon" style="color:#0088cc;"></i><div><h4 style="color:white;">Step 4: Join TG Channel</h4></div></div>
                                <div class="task-status"><i class="fas fa-lock" id="icon4"></i></div>
                            </div>
                        </div>
                    </section>

                    <!-- CODE STORE WIDGET -->
                    <section class="dash-glass-card">
                        <h3 class="dash-card-title"><i class="fas fa-code"></i> Source Code Store</h3>
                        <div class="locked-wrapper" id="storeWrapper">
                             <div style="padding: 20px; text-align: center; color: #aaa;">
                                <i class="fas fa-cubes fa-3x" style="margin-bottom:15px; color: var(--secondary);"></i>
                                <p>Access Premium Source Codes</p>
                             </div>
                             <a href="javascript:void(0)" onclick="openFullStore()" class="btn btn-primary" style="margin-top: 15px; width: 100%; text-align: center; font-size:1rem;">
                                <i class="fas fa-shopping-cart"></i> GO TO FULL STORE
                            </a>
                        </div>
                    </section>
                    
                    <!-- INNOVATION & TRACKING SECTION (LOCKED) -->
                    <section class="dash-glass-card" style="position: relative;">
                        <h3 class="dash-card-title"><i class="fas fa-lightbulb" style="color: #ffd700;"></i> Innovation & Tracking</h3>
                        
                        <!-- Lock Overlay for Innovation Section -->
                        <div class="community-lock-overlay" id="innLockOverlay">
                            <i class="fas fa-lock fa-3x" style="color: #ff0055; margin-bottom: 15px;"></i>
                            <h4>Access Locked</h4>
                            <p>You need Admin Approval to access Innovation features.</p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <!-- IDEA SUBMISSION -->
                            <div class="eco-card" onclick="openFullPageForm('Idea Submission')" style="cursor: pointer; text-align: center; padding: 20px;">
                                <i class="fas fa-paper-plane fa-2x" style="color: #00f2ff; margin-bottom: 10px;"></i>
                                <h4 style="margin-bottom: 5px;">Submit Idea</h4>
                                <p style="font-size: 0.8rem; color: #aaa;">Share your concept</p>
                            </div>

                            <!-- DEVELOPMENT REQUESTS TRACKING -->
                            <div class="eco-card" onclick="openTrackingPage()" style="cursor: pointer; text-align: center; padding: 20px;">
                                <i class="fas fa-shipping-fast fa-2x" style="color: #ff00ff; margin-bottom: 10px;"></i>
                                <h4 style="margin-bottom: 5px;">Track Request</h4>
                                <p style="font-size: 0.8rem; color: #aaa;">Status & History</p>
                            </div>

                            <!-- SCRATCH CARD -->
                            <div class="eco-card" onclick="initScratchCard()" style="cursor: pointer; text-align: center; padding: 20px; grid-column: span 2;">
                                <i class="fas fa-gift fa-2x" style="color: #ffd700; margin-bottom: 10px;"></i>
                                <h4 style="margin-bottom: 5px;">Scratch & Win</h4>
                                <p style="font-size: 0.8rem; color: #aaa;">Daily Bonus (0-5k Coins)</p>
                            </div>
                        </div>
                    </section>

                    <!-- COMMUNITY SECTION -->
                    <section class="dash-glass-card" style="position: relative;">
                        <h3 class="dash-card-title"><i class="fas fa-users" style="color: var(--accent);"></i> Community & Support</h3>
                        
                        <!-- Lock Overlay for Community Section -->
                        <div class="community-lock-overlay" id="commLockOverlay">
                            <i class="fas fa-lock fa-3x" style="color: #ff0055; margin-bottom: 15px;"></i>
                            <h4>Access Locked</h4>
                            <p>You need Admin Approval to access community links.</p>
                        </div>

                        <div class="comm-grid">
                            <a href="#" class="comm-btn"><i class="fab fa-whatsapp" style="color: #25D366;"></i> WA Group</a>
                            <a href="#" class="comm-btn"><i class="fas fa-users" style="color: #25D366;"></i> WA Community</a>
                            <a href="https://t.me/SazzidulCorporationCommunity" target="_blank" class="comm-btn"><i class="fab fa-telegram" style="color: #0088cc;"></i> TG Group</a>
                            <a href="https://youtube.com/@sazzidulcorporation" target="_blank" class="comm-btn"><i class="fab fa-youtube" style="color: #FF0000;"></i> YouTube</a>
                            <a href="https://www.facebook.com/Sazzidulcorporation" target="_blank" class="comm-btn"><i class="fab fa-facebook" style="color: #1877F2;"></i> Facebook</a>
                            <a href="javascript:void(0)" onclick="openFullPageForm('Contact SCC')" class="comm-btn"><i class="fas fa-headset" style="color: var(--primary);"></i> Get Help</a>
                        </div>
                    </section>

                </main>
            </div>
        </div>
        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-logo">SAZZIDUL CORPORATION COMMUNITY</div>
                <div class="footer-desc">Building a future where code meets creativity. Join the elite network of developers and innovators.</div>
                <div class="footer-bottom">&copy; 2025 SCC. All Rights Reserved.</div>
            </div>
        </footer>
    </div>

    <!-- NEW: CROPPER MODAL -->
    <div class="crop-modal" id="cropModal">
        <div class="crop-container">
            <img id="imageToCrop" src="">
        </div>
        <div class="crop-actions">
            <button class="btn btn-outline" onclick="cancelCrop()">Cancel</button>
            <button class="btn btn-primary" id="saveCropBtn">Save Photo</button>
        </div>
    </div>


    <script>
        // --- 0. PAGE LOAD BEHAVIOR ---
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        }
        document.addEventListener('DOMContentLoaded', () => {
            initCanvas();
            initScrollAnimations();
            initDonationHandlers();
        });


        // --- 1. FIREBASE SETUP ---
        const firebaseConfig = {
            apiKey: "AIzaSyDsKNWY4AVli3dnRawnQhxEXCkrbB54RBk",
            authDomain: "sccc-24095.firebaseapp.com",
            databaseURL: "https://sccc-24095-default-rtdb.firebaseio.com",
            projectId: "sccc-24095",
            storageBucket: "sccc-24095.firebasestorage.app",
            messagingSenderId: "308340054036",
            appId: "1:308340054036:web:063fbcdf87575d5b442f01"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let currentUser = {}; 
        let rewardTimerInterval = null;
        let timeTrackerInterval = null;
        let cropper = null;

        // NEW: Predefined avatars from user request
        const predefinedAvatars = [
            'https://i.ibb.co/ZR5gw1rh/image-search-1768651783922.png',
            'https://i.ibb.co/W4WHCfNB/image-search-1768652024458.png',
            'https://i.ibb.co/8LvzCvG3/image-search-1768652027301.png',
            'https://i.ibb.co/5gY89LbW/image-search-1768652032518.png',
            'https://i.ibb.co/21M3G3Mc/image-search-1768652059419.png',
            'https://i.ibb.co/yc22rSTT/Picsart-26-01-17-17-48-04-711.png',
            'https://i.ibb.co/W4cJcx31/image-search-1768652040036.png',
            'https://i.ibb.co/zVFDRPTR/image-search-1768652174225.png'
        ];
        
        // MODIFICATION: Data for Public Premium Store
        const publicStoreItems = [
             { id: 'website_001', name: 'First Website Source Code', category: 'website', type: 'free', imageUrl: 'https://i.ibb.co/g2qm7yx/Screenshot-2025-12-05-17-59-55-78-e2d5b3f32b79de1d45acd1fad96fbb0f.jpg' }
        ];


        // ============================================
        //   A. ANIMATIONS & DYNAMIC UI
        // ============================================
        function initCanvas() {
            const canvas = document.getElementById("canvas-bg");
            if (!canvas) return;
            const ctx = canvas.getContext("2d");
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let particlesArray;
            const colors = ['#00f2ff', '#bc13fe', '#ff00ff'];

            class Particle {
                constructor(x, y, directionX, directionY, size, color) {
                    this.x = x; this.y = y; this.directionX = directionX; this.directionY = directionY; this.size = size; this.color = color;
                }
                draw() {
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = this.color; ctx.fill();
                }
                update() {
                    if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                    if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                    this.x += this.directionX; this.y += this.directionY; this.draw();
                }
            }

            function initParticles() {
                particlesArray = [];
                let numberOfParticles = (canvas.height * canvas.width) / 7000;
                for (let i = 0; i < numberOfParticles; i++) {
                    let size = (Math.random() * 2) + 1;
                    let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                    let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                    let directionX = (Math.random() * 0.6) - 0.3;
                    let directionY = (Math.random() * 0.6) - 0.3;
                    let color = colors[Math.floor(Math.random() * colors.length)];
                    particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
                }
            }

            function connect() {
                let opacityValue = 1;
                for (let a = 0; a < particlesArray.length; a++) {
                    for (let b = a; b < particlesArray.length; b++) {
                        let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + 
                                       ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                        if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                            opacityValue = 1 - (distance / 20000);
                            ctx.strokeStyle = `rgba(0, 242, 255, ${opacityValue})`;
                            ctx.lineWidth = 1;
                            ctx.beginPath(); ctx.moveTo(particlesArray[a].x, particlesArray[a].y); ctx.lineTo(particlesArray[b].x, particlesArray[b].y); ctx.stroke();
                        }
                    }
                }
            }

            function animate() {
                requestAnimationFrame(animate); ctx.clearRect(0, 0, innerWidth, innerHeight);
                for (let i = 0; i < particlesArray.length; i++) { particlesArray[i].update(); }
                connect();
            }

            initParticles(); animate();
            window.addEventListener('resize', function(){
                canvas.width = innerWidth; canvas.height = innerHeight; initParticles();
            });
        }
        
        function animateCountUp(element, end, duration = 1500) {
            let start = 0;
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const current = Math.floor(progress * end);
                element.innerText = formatNumber(current);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        function loopingAnimateCounter(element, duration = 1500, delay = 2000) {
            const end = parseInt(element.dataset.target, 10);
            let start = 0;
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                element.innerText = Math.floor(progress * (end - start) + start) + '%';
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    setTimeout(() => {
                        element.innerText = '0%';
                        loopingAnimateCounter(element, duration, delay);
                    }, delay);
                }
            };
            window.requestAnimationFrame(step);
        }

        function loopingAnimateMissionStat(element, duration = 2000, delay = 3000) {
             const end = parseInt(element.dataset.loopAnimate, 10);
             const originalText = element.innerText.replace(/[0-9,.]+/g, '');
             let start = 0;
             let startTimestamp = null;
             const step = (timestamp) => {
                 if (!startTimestamp) startTimestamp = timestamp;
                 const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                 const current = Math.floor(progress * end);
                 element.innerText = formatNumber(current) + originalText;
                 if (progress < 1) {
                     window.requestAnimationFrame(step);
                 } else {
                     setTimeout(() => {
                         element.innerText = '0' + originalText;
                         loopingAnimateMissionStat(element, duration, delay);
                     }, delay);
                 }
             };
             window.requestAnimationFrame(step);
        }

        function initScrollAnimations() {
            const observerOptions = { root: null, threshold: 0.1 };
            
            const scrollObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            document.querySelectorAll('.reveal-on-scroll').forEach(el => scrollObserver.observe(el));
            
            const revenueSection = document.getElementById('projects');
            if (revenueSection) {
                 const revenueObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.querySelectorAll('.split-circle span').forEach(el => {
                                loopingAnimateCounter(el, 1500, 3000);
                            });
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.5 });
                revenueObserver.observe(revenueSection);
            }

            const missionSection = document.getElementById('mission');
            if(missionSection) {
                 const missionObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.querySelectorAll('[data-loop-animate]').forEach(el => {
                                loopingAnimateMissionStat(el);
                            });
                            observer.unobserve(entry.target);
                        }
                    });
                 }, { threshold: 0.5 });
                 missionObserver.observe(missionSection);
            }
        }


        // ============================================
        //   B. JOIN FORM
        // ============================================
        document.getElementById('joinForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = this.querySelector('button');
            const passInput = document.getElementById('joinPass').value;

            // Password Validation (Min 6, At least 1 Capital)
            if (passInput.length < 6 || !/[A-Z]/.test(passInput)) {
                showToast("Password too weak! Min 6 chars, 1 capital letter.", "error");
                return;
            }

            btn.disabled = true; btn.innerText = "Generating ID...";

            const newSCCID = "SCC" + Math.floor(100000 + Math.random() * 900000);
            
            const newPassword = passInput;

            const userData = {
                fullName: document.getElementById('joinName').value, email: document.getElementById('joinEmail').value,
                phone: document.getElementById('joinPhone').value, age: document.getElementById('joinAge').value,
                skills: document.getElementById('joinSkill').value, sccID: newSCCID, password: newPassword,
                coins: 0, 
                totalLifetimeCoins: 0,
                total_coins_spent: 0, 
                joinedAt: Date.now(), 
                status: "Pending", 
                loginCount: 0,
                last_login: Date.now(), 
                violation_count: 0,
                appeal_status: 'None',
                tasks: { task1: false, task2: false, task3: false, task4: false }
            };

            db.ref('users/' + newSCCID).set(userData).then(() => {
                document.getElementById('genUsername').innerText = newSCCID; 
                document.getElementById('genPassword').innerText = newPassword;
                document.getElementById('credsModal').classList.add('active'); 
                document.getElementById('joinForm').reset();
                btn.disabled = false; btn.innerText = "Submit & Get SCC ID";
            }).catch(error => { showToast("Error: " + error.message, 'error'); btn.disabled = false; });
        });

        // ============================================
        //   C. DYNAMIC PAGES & MODALS
        // ============================================
        function openPage(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('active');
            modal.scrollTop = 0; 
            if(modalId === 'scratchModal') modal.style.display = 'flex';
        }
        function closePage(modalId) { 
            const modal = document.getElementById(modalId);
            modal.classList.remove('active');
            if(modalId === 'scratchModal') modal.style.display = 'none';
        }

        function openLegalPage(pageType) {
            openPage('legalPageModal');
            document.getElementById('legalPageTitle').innerText = "Legal"; document.getElementById('legalHeading').innerText = pageType;
            
            const contentArea = document.getElementById('legalContentArea'); const dateText = document.getElementById('legalDateText');
            contentArea.innerHTML = '<div style="text-align:center; padding:50px;"><i class="fas fa-circle-notch fa-spin fa-2x" style="color:#00f2ff;"></i></div>';

            const dbKey = pageType.toLowerCase().replace(/ /g, '_').replace(/&/g, 'and');
            db.ref('legal_content/' + dbKey).once('value').then(s => {
                if(s.exists()){
                     const data = s.val();
                     contentArea.innerHTML = data.content || data;
                     dateText.innerText = data.timestamp ? `Last Updated: ${new Date(data.timestamp).toLocaleDateString()}` : `Last Updated: N/A`;
                } else {
                    contentArea.innerHTML = `<div style="text-align:center; padding:40px;"><h3 style="color:#aaa;">Content for <b>${pageType}</b> not yet published.</h3></div>`;
                }
            });
        }
        function closeLegalPage() { closePage('legalPageModal'); }

        function openStoryModal() {
            openPage('sccStoryModal');
            const contentDiv = document.getElementById('sccStoryContent');
            contentDiv.innerHTML = `<div style="text-align:center; padding:50px;"><i class="fas fa-circle-notch fa-spin fa-2x"></i></div>`;
            db.ref('scc_story').once('value').then(snapshot => {
                if (snapshot.exists()) {
                    const story = snapshot.val();
                    contentDiv.innerHTML = `<h1 class="story-heading">${story.title || 'The SCC Story'}</h1><div class="legal-text-content" style="white-space: pre-wrap;">${story.content || 'Story content not found.'}</div>`;
                } else {
                    contentDiv.innerHTML = `<h1 class="story-heading">Story Not Found</h1><p style="text-align:center;">The SCC Story has not been published yet.</p>`;
                }
            });
        }
        function closeStoryModal() { closePage('sccStoryModal'); }

        function openFullStore() { openPage('fullStorePage'); loadFullStoreContent('all'); }
        function closeFullStore() { closePage('fullStorePage'); }

        function openPublicStore() { openPage('publicStorePage'); loadPublicStoreContent(); }
        function closePublicStore() { closePage('publicStorePage'); }
        
        function loadPublicStoreContent(category = 'all') {
             const store = document.getElementById('publicStoreContent');
             if (!store) return;
             store.innerHTML = '';
             let itemsFound = false;

             publicStoreItems.forEach(item => {
                 if (category !== 'all' && item.category !== category) return;
                 // MODIFICATION: Added filter for 'free' category
                 if (category === 'free' && item.type !== 'free') return;
                 
                 itemsFound = true;
                 
                 let cardAction = `onclick="showToast('Create an SCC Account to access resources.', 'info')"`;
                 let btnHtml = `<button class="unlock-btn buy"><i class="fas fa-eye"></i> VIEW DETAILS</button>`;
                 let displayPrice = `<span style="color:#00ff88; font-weight:bold;">FREE</span>`;

                 const cardHtml = `
                     <div class="code-card" ${cardAction} data-category="${item.category}">
                         <div class="code-img-wrapper">
                            <img src="${item.imageUrl || 'https://via.placeholder.com/200x140.png/0b0b15/ffc107?text=Code'}" alt="${item.name}">
                         </div>
                         <div class="code-title">${item.name}</div>
                         <div class="code-price">${displayPrice}</div>
                         ${btnHtml}
                     </div>
                 `;
                 store.innerHTML += cardHtml;
             });
             
             if (!itemsFound) {
                 store.innerHTML = `<div style="grid-column: 1 / -1; text-align:center; color:#777; padding: 40px 0;"><i class="fas fa-search fa-2x"></i><p style="margin-top:10px;">No items found in this category yet.</p></div>`;
             }
        }

        function filterPublicStore(category, btnElement) {
            document.querySelectorAll('#publicStoreFilters .store-filter-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');
            loadPublicStoreContent(category);
        }

        function openDonationPage() { openPage('donationPage'); }
        function closeDonationPage() { closePage('donationPage'); }
        function openBuildRequestPage() { openPage('buildRequestPage'); }
        function closeBuildRequestPage() { closePage('buildRequestPage'); }
        
        document.getElementById('buildRequestForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const year = new Date().getFullYear();
            const rand = Math.random().toString(36).substr(2, 6).toUpperCase();
            const reqID = `REQ-${year}-${rand}`;
            const reqData = {
                reqID: reqID, sccID: currentUser.sccID || 'GUEST', client: document.getElementById('buildName').value, 
                phone: document.getElementById('buildPhone').value, type: document.getElementById('buildType').value, 
                budget: document.getElementById('buildBudget').value, desc: document.getElementById('buildDesc').value, 
                status: 'SUBMITTED', date: Date.now()
            };
            db.ref('project_requests').push(reqData).then(() => {
                showToast(`Request Received! Your ID: ${reqID}`, 'success');
                closeBuildRequestPage(); document.getElementById('buildRequestForm').reset();
            }).catch(err => showToast("Error: " + err.message, 'error'));
        });

        function openFullPageForm(category) {
            openPage('universalPageForm');
            document.getElementById('universalPageForm').style.zIndex = "10010"; 
            document.getElementById('universalPageTitle').innerText = category.split(' ')[0];
            document.getElementById('universalFormHeading').innerHTML = `${category.split(' ')[0]} <span class="gradient-text">${category.split(' ').slice(1).join(' ')}</span>`;
            document.getElementById('genCategory').value = category;
            const idCont = document.getElementById('genIdContainer'), idInp = document.getElementById('genID');
            const nameInp = document.getElementById('genName');
            const fbExt = document.getElementById('genFeedbackExtra'), volExt = document.getElementById('genVolunteerExtra');
            const appealExt = document.getElementById('genAppealExtra'), ideaExt = document.getElementById('genIdeaExtra');
            const msgArea = document.getElementById('genMsg'); const counter = document.getElementById('charCountDisplay');
            idCont.style.display = 'block'; idInp.required = true; 
            fbExt.style.display = 'none'; volExt.style.display = 'none'; 
            appealExt.style.display = 'none'; ideaExt.style.display = 'none';
            msgArea.value = ''; counter.innerText = "0 / 900";
            if(currentUser && currentUser.sccID) { idInp.value = currentUser.sccID; nameInp.value = currentUser.fullName || ''; }
            msgArea.oninput = function() {
                const len = this.value.length; counter.innerText = `${len} / 900`;
                if(len > 900) this.value = this.value.substring(0, 900);
            };
            if(category === 'Feedback') { idCont.style.display = 'none'; idInp.required = false; fbExt.style.display = 'block'; } 
            else if(category === 'Join as Volunteer') { volExt.style.display = 'block'; }
            else if (category === 'Idea Submission') { ideaExt.style.display = 'block'; }
            else if (category === 'Suspension Appeal') {
                appealExt.style.display = 'block'; if(currentUser && currentUser.sccID) idInp.value = currentUser.sccID;
            }
            document.getElementById('universalFormBody').style.display = 'block'; document.getElementById('universalFormSuccess').style.display = 'none';
        }

        function closeFullPageForm() {
            closePage('universalPageForm'); document.getElementById('genericForm').reset();
            document.querySelectorAll('#starContainer i').forEach(s => s.classList.remove('active'));
            document.getElementById('genRating').value = "0";
        }

        document.querySelectorAll('#starContainer i').forEach(star => {
            star.onclick = function() {
                const val = this.getAttribute('data-val'); document.getElementById('genRating').value = val;
                document.querySelectorAll('#starContainer i').forEach(s => s.classList[s.getAttribute('data-val') <= val ? 'add' : 'remove']('active'));
            }
        });

        document.getElementById('genericForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const category = document.getElementById('genCategory').value; const msg = document.getElementById('genMsg').value;
            if (category === 'Idea Submission' && msg.length < 100) return showToast("Idea details must be at least 100 characters.", "error");
            if (category === 'Suspension Appeal' && msg.length < 50) return showToast("Explanation must be at least 50 characters.", "error");
            const data = { name: document.getElementById('genName').value || "Anonymous", message: msg, timestamp: Date.now() };
            if(category === 'Feedback') { data.rating = document.getElementById('genRating').value; } 
            else if (category === 'Join as Volunteer') { data.sccID = document.getElementById('genID').value; data.role = document.getElementById('volRole').value; } 
            else if (category === 'Idea Submission') { 
                data.sccID = document.getElementById('genID').value; data.title = document.getElementById('ideaTitle').value;
                data.link = document.getElementById('ideaLink').value; data.status = 'Submitted';
            }
            else if (category === 'Suspension Appeal') {
                data.sccID = document.getElementById('genID').value; data.reason = document.getElementById('appealReasonSelect').value;
                data.status = 'Pending'; db.ref('users/' + currentUser.sccID).update({ appeal_status: 'Pending' });
            }
            else { data.sccID = document.getElementById('genID').value; }
            let path = `support_requests/${category.replace(/\s+/g, '_')}`;
            if(category === 'Feedback') path = 'feedback_entries';
            if(category === 'Join as Volunteer') path = 'volunteer_requests';
            if(category === 'Idea Submission') path = 'idea_submissions';
            if(category === 'Suspension Appeal') path = 'suspension_appeals';
            db.ref(path).push(data).then(() => {
                document.getElementById('universalFormBody').style.display = 'none'; document.getElementById('universalFormSuccess').style.display = 'block';
            });
        });
        
        function openArticlePage(type) { document.getElementById('articlePageTitle').innerText = type; openPage('articlePage'); }
        function openDonationListPage() {
            openPage('donationListPage');
            const listEl = document.getElementById('donationListContent');
            listEl.innerHTML = '<li style="text-align:center; color:#666; padding: 20px;">No donations listed yet.</li>';
        }

        // ============================================
        //   D. NEW & MODIFIED PAGE LOGIC
        // ============================================
        
        // MODIFICATION: SCC Review Page Logic
        function openSccReviewPage() {
            openPage('sccReviewPage');
            const grid = document.getElementById('reviewGridContent');
            grid.innerHTML = `<div style="text-align:center; padding:50px; grid-column: 1 / -1;"><i class="fas fa-circle-notch fa-spin fa-2x"></i></div>`;

            db.ref('feedback_entries').orderByChild('rating').startAt("4").once('value', snapshot => {
                grid.innerHTML = '';
                if (snapshot.exists()) {
                    snapshot.forEach(childSnapshot => {
                        const review = childSnapshot.val();
                        if(review.message && review.message.length > 20) { // Only show meaningful reviews
                            let stars = '';
                            for(let i = 0; i < 5; i++) {
                                stars += `<i class="fas fa-star ${i < review.rating ? '' : 'far'}"></i>`;
                            }
                            const reviewCard = `
                                <div class="review-card">
                                    <div class="review-card-header">
                                        <span class="review-author">${review.name || 'Anonymous'}</span>
                                        <div class="review-stars">${stars}</div>
                                    </div>
                                    <p>"${review.message}"</p>
                                    <footer>${new Date(review.timestamp).toLocaleDateString()}</footer>
                                </div>
                            `;
                            grid.innerHTML += reviewCard;
                        }
                    });
                } else {
                    grid.innerHTML = `<div style="text-align:center; padding:50px; grid-column: 1 / -1; color: #aaa;"><h3>No Reviews Yet</h3><p>Be the first to leave feedback!</p></div>`;
                }
            });
        }
        
        // MODIFICATION: Donation Page Button Logic
        function initDonationHandlers() {
            const amountBtns = document.querySelectorAll('.donation-amount-btn');
            const customAmountInput = document.getElementById('customDonationAmount');
            const donateBtnContainer = document.getElementById('donateButtonContainer');
            const donateAmountLabel = document.getElementById('donateAmountLabel');
            
            function showDonateButton(amount) {
                if (amount >= 50) {
                    donateAmountLabel.innerText = `(â‚¹${amount})`;
                    donateBtnContainer.style.display = 'block';
                } else {
                    donateBtnContainer.style.display = 'none';
                }
            }

            amountBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    amountBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    customAmountInput.value = '';
                    showDonateButton(parseInt(btn.dataset.amount));
                });
            });

            customAmountInput.addEventListener('input', () => {
                amountBtns.forEach(b => b.classList.remove('active'));
                const amount = parseInt(customAmountInput.value);
                showDonateButton(amount);
            });
        }
        
        // ============================================
        //   E. LOGIN & DASHBOARD LOGIC
        // ============================================
        window.onload = function() {
            window.scrollTo(0, 0); initSiteStats();
            const savedSession = localStorage.getItem('scc_current_session');
            if (savedSession) {
                currentUser = JSON.parse(savedSession); showDashboard(); checkLiveStatus(currentUser.sccID);
            } else {
                document.getElementById('main-website').style.display = 'block'; document.getElementById('main-dashboard').style.display = 'none';
            }
        };
        
        function initSiteStats() {
            const memberEl = document.getElementById('liveMemberCount');
            const appsEl = document.getElementById('appsPublicCount');
            const revenueEl = document.getElementById('revenueCount');

            if(memberEl) {
                db.ref('users').once('value', s => {
                    if (s.exists()) {
                        let approvedCount = Object.values(s.val()).filter(u => u.status && u.status.toLowerCase() === 'approved').length;
                        animateCountUp(memberEl, approvedCount);
                    }
                });
            }
            if(appsEl) {
                db.ref('site_stats/appsPublic').once('value', s => {
                    const count = s.exists() ? s.val() : 0;
                    animateCountUp(appsEl, count);
                });
            }
            if(revenueEl) {
                // Assuming revenue is 0 for now
                animateCountUp(revenueEl, 0);
            }
        }

        function showDashboard() {
            document.getElementById('main-website').style.display = 'none'; document.getElementById('main-dashboard').style.display = 'block';
            closePage('loginModal'); window.scrollTo(0,0); initDashboardLogic();
        }

        function initDashboardLogic() { 
            updateDashUI(); startTimeTracker(); loadTaskStatus();
            if(rewardTimerInterval) clearInterval(rewardTimerInterval);
            rewardTimerInterval = setInterval(checkDailyReward, 1000);
        }

        function calculateUserLevel(lifetimeCoins) {
            if (lifetimeCoins >= 5000000) return 'LEGEND'; if (lifetimeCoins >= 2000000) return 'MASTER';
            if (lifetimeCoins >= 1000000) return 'DIAMOND'; if (lifetimeCoins >= 50000) return 'PLATINUM';
            if (lifetimeCoins >= 100000) return 'GOLD'; if (lifetimeCoins >= 50000) return 'SILVER';
            return 'BRONZE';
        }

        function updateDashUI() {
            document.getElementById('userName').innerText = currentUser.fullName || 'User';
            document.getElementById('userId').innerText = currentUser.sccID || '...';
            document.getElementById('coinBalance').innerText = formatNumber(currentUser.coins || 0);
            
            const pfpKey = 'scc_user_pfp_' + currentUser.sccID;
            let currentPfp = localStorage.getItem(pfpKey);
            if (!currentPfp) {
                const numericId = parseInt((currentUser.sccID || 'SCC0').replace('SCC',''));
                const avatarIndex = isNaN(numericId) ? 0 : numericId % predefinedAvatars.length;
                currentPfp = predefinedAvatars[avatarIndex];
                localStorage.setItem(pfpKey, currentPfp);
            }
            document.getElementById('profilePic').src = currentPfp;
            
            document.getElementById('coinsSpent').innerText = formatNumber(currentUser.total_coins_spent || 0);
            const statusEl = document.getElementById('userStatus');
            const levelEl = document.getElementById('userLevel');
            const lifetime = currentUser.totalLifetimeCoins !== undefined ? currentUser.totalLifetimeCoins : (currentUser.coins || 0);
            const currentLevel = calculateUserLevel(lifetime);
            levelEl.innerText = currentLevel;
            const status = (currentUser.status || 'Pending').toUpperCase();
            statusEl.innerText = status; statusEl.className = 'badge-status'; 
            if(status === 'APPROVED' || status === 'ACTIVE') {
                statusEl.classList.add('approved'); statusEl.style.color = '#00ff88'; statusEl.style.borderColor = '#00ff88';
            } else if(status === 'REJECTED' || status === 'SUSPENDED') {
                 statusEl.classList.add('rejected');
            } else {
                statusEl.classList.add('pending'); statusEl.style.color = '#ff0055'; statusEl.style.borderColor = '#ff0055';
            }
            document.getElementById('loginCount').innerText = currentUser.loginCount || 0;
            let progress = 0;
            if (currentUser.status && (currentUser.status.toLowerCase() === 'approved' || currentUser.status.toLowerCase() === 'active')) { progress += 50; }
            let tasksDone = 0;
            if (currentUser.tasks) {
                 if(currentUser.tasks.task1) tasksDone++; if(currentUser.tasks.task2) tasksDone++;
                 if(currentUser.tasks.task3) tasksDone++; if(currentUser.tasks.task4) tasksDone++;
            }
            if (tasksDone === 4) { progress += 50; }
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressPercent').innerText = progress + '%';
            const commOverlay = document.getElementById('commLockOverlay');
            const innOverlay = document.getElementById('innLockOverlay');
            if (currentUser.status && (currentUser.status.toLowerCase() === 'approved' || currentUser.status.toLowerCase() === 'active')) {
                if(commOverlay) commOverlay.style.display = 'none'; if(innOverlay) innOverlay.style.display = 'none'; 
            } else {
                if(commOverlay) commOverlay.style.display = 'flex'; if(innOverlay) innOverlay.style.display = 'flex'; 
            }
        }

        function logout(){ 
            localStorage.removeItem('scc_current_session'); 
            location.reload(); 
        }
        
        function formatNumber(num) {
            if(!num && num !== 0) return '0'; if(num >= 1000000) return (num / 1000000).toFixed(1).replace('.0','') + 'M'; 
            if(num >= 1000) return (num / 1000).toFixed(1).replace('.0','') + 'k'; 
            return num.toLocaleString();
        }
        
        function startTimeTracker() {
            const tick = () => {
                const today = new Date().toISOString().slice(0, 10);
                const storageKey = `scc_today_seconds_${today}`;
                let sec = parseInt(localStorage.getItem(storageKey) || 0) + 1;
                localStorage.setItem(storageKey, sec);
                const el = document.getElementById('timeSpent');
                if (el) el.innerText = `${String(Math.floor(sec/60)).padStart(2, '0')}m ${String(sec%60).padStart(2, '0')}s`;
            };
            if (timeTrackerInterval) clearInterval(timeTrackerInterval);
            timeTrackerInterval = setInterval(tick, 1000);
            document.addEventListener('visibilitychange', () => {
                clearInterval(timeTrackerInterval); if (!document.hidden) timeTrackerInterval = setInterval(tick, 1000);
            });
            const today = new Date().toISOString().slice(0, 10);
            const sec = parseInt(localStorage.getItem(`scc_today_seconds_${today}`) || 0);
            const el = document.getElementById('timeSpent');
            if (el) el.innerText = `${String(Math.floor(sec/60)).padStart(2, '0')}m ${String(sec%60).padStart(2, '0')}s`;
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const uid = document.getElementById('loginUser').value.trim().toUpperCase();
            const pass = document.getElementById('loginPass').value.trim();
            if(!uid || !pass) return showToast("Please enter both SCC ID and Password.", 'error');
            db.ref('users/' + uid).once('value').then(s => {
                if (s.exists() && s.val().password === pass) {
                    const userStatus = s.val().status || "Active";
                    if(userStatus === 'BANNED' || userStatus === 'DEACTIVATED') {
                        showToast("Account Terminated. Access Denied.", "error"); return;
                    }
                    const userRef = db.ref('users/' + uid);
                    userRef.update({ loginCount: (s.val().loginCount || 0) + 1, last_login: Date.now() });
                    currentUser = { ...s.val(), loginCount: (s.val().loginCount || 0) + 1 };
                    localStorage.setItem('scc_current_session', JSON.stringify(currentUser));
                    showDashboard(); checkLiveStatus(uid);
                } else { showToast("Invalid Credentials", 'error'); }
            });
        });

        // ============================================
        //   F. ADVANCED SUSPENSION & STATUS LOGIC
        // ============================================
        function checkLiveStatus(uid) {
            db.ref('users/' + uid).on('value', s => {
                if(s.exists()) {
                    currentUser = {...currentUser, ...s.val()};
                    if (currentUser.totalLifetimeCoins === undefined) {
                        currentUser.totalLifetimeCoins = currentUser.coins || 0;
                        db.ref('users/' + uid).update({ totalLifetimeCoins: currentUser.coins || 0 });
                    }
                    localStorage.setItem('scc_current_session', JSON.stringify(currentUser));
                    handleStatusLogic(uid, currentUser);
                    if ((currentUser.status === 'Approved' || currentUser.status === 'Active') && !currentUser.welcome_bonus_received) {
                        const newCoins = (currentUser.coins || 0) + 40000;
                        const newLifetime = (currentUser.totalLifetimeCoins || 0) + 40000;
                        db.ref('users/' + uid).update({ coins: newCoins, totalLifetimeCoins: newLifetime, welcome_bonus_received: true })
                        .then(() => showToast("40k Coins Bonus Received!", "success"));
                    }
                    updateDashUI();
                }
            });
        }

        function handleStatusLogic(uid, user) {
            const now = Date.now(); const dayInMs = 86400000;
            const daysInactive = (now - (user.last_login || user.joinedAt)) / dayInMs;
            if (daysInactive >= 150 && (user.status === 'Active' || user.status === 'Approved')) {
                db.ref('users/' + uid).update({ status: 'Suspended', suspension_reason: 'Inactivity (>150 Days)', suspension_date: now }); return;
            }
            if (daysInactive >= 180 && user.status === 'Suspended') {
                db.ref('users/' + uid).update({ status: 'DEACTIVATED' });
                showToast("Your account has been permanently deactivated.", "error"); logout(); return;
            }
            if(user.violation_count >= 3 && user.status !== 'BANNED') { db.ref('users/' + uid).update({ status: 'BANNED' }); return; }
            if (user.status === 'Suspended' && user.suspension_end_date) {
                if (now > user.suspension_end_date) {
                    db.ref('users/' + uid).update({ status: 'Active', suspension_reason: null, suspension_end_date: null }); return;
                }
            }
            const overlay = document.getElementById('suspensionOverlay');
            if (user.status === 'Suspended') {
                document.body.classList.add('is-suspended'); overlay.style.display = 'flex';
                document.getElementById('suspensionReasonText').innerText = user.suspension_reason || "Policy Violation";
                if (user.appeal_status === 'Pending') {
                    document.getElementById('appealSection').style.display = 'none'; document.getElementById('appealPendingSection').style.display = 'block';
                } else {
                    document.getElementById('appealSection').style.display = 'block'; document.getElementById('appealPendingSection').style.display = 'none';
                }
                if(user.suspension_end_date) {
                    const timeLeft = Math.max(0, user.suspension_end_date - now); const daysLeft = Math.ceil(timeLeft / dayInMs);
                    document.getElementById('suspensionTimer').innerText = `Lifting in: ${daysLeft} Days`;
                } else { document.getElementById('suspensionTimer').innerText = "Indefinite until Appeal"; }
            } else if (user.status === 'BANNED') {
                document.body.classList.add('is-suspended'); overlay.style.display = 'flex';
                document.getElementById('suspensionReasonText').innerText = "3 STRIKES - PERMANENT BAN";
                document.getElementById('appealSection').style.display = 'none'; document.getElementById('bannedMessage').style.display = 'block';
            } else { document.body.classList.remove('is-suspended'); overlay.style.display = 'none'; }
        }
        
        function checkDailyReward() {
            const btn = document.getElementById('claimBtn'), timerBox = document.getElementById('claimTimer'), timerVal = document.getElementById('timerVal');
            const lastClaim = currentUser.lastClaim || 0, now = Date.now(), target = lastClaim + 86400000; 
            if (now >= target) {
                btn.disabled = false; btn.innerHTML = `<i class="fas fa-gift"></i> CLAIM REWARD (+2500)`; timerBox.style.display = 'none';
            } else {
                btn.disabled = true; btn.innerHTML = `<i class="fas fa-check"></i> CLAIMED TODAY`; timerBox.style.display = 'block';
                const diff = target - now, h = Math.floor(diff / 36e5), m = Math.floor((diff % 36e5) / 6e4), s = Math.floor((diff % 6e4) / 1e3);
                timerVal.innerText = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
            }
        }

        function claimDailyReward() {
            const reward = 2500; const newCoins = (currentUser.coins || 0) + reward; const newLifetime = (currentUser.totalLifetimeCoins || 0) + reward;
            const claimTime = Date.now();
            db.ref('users/' + currentUser.sccID).update({ coins: newCoins, totalLifetimeCoins: newLifetime, lastClaim: claimTime }).then(() => {
                currentUser.coins = newCoins; currentUser.totalLifetimeCoins = newLifetime; currentUser.lastClaim = claimTime; 
                updateDashUI(); showToast(`+${reward} coins claimed!`, 'success');
            });
        }

        function loadTaskStatus() {
            const tasks = currentUser.tasks || {};
            updateTaskUI(1, tasks.task1); updateTaskUI(2, tasks.task2);
            updateTaskUI(3, tasks.task3); updateTaskUI(4, tasks.task4);
            if(tasks.task1) document.getElementById('task2').classList.remove('locked');
            if(tasks.task2) document.getElementById('task3').classList.remove('locked');
            if(tasks.task3) document.getElementById('task4').classList.remove('locked');
        }

        function updateTaskUI(id, completed) {
            const el = document.getElementById('task'+id); const icon = document.getElementById('icon'+id);
            if (completed) { el.classList.add('completed'); icon.className = 'fas fa-check-circle'; }
        }

        function completeTask(id, url) {
            const taskKey = 'task' + id; const el = document.getElementById('task' + id);
            if(el.classList.contains('locked')) return;
            if(currentUser.tasks && currentUser.tasks[taskKey]) { window.open(url, '_blank'); return; }
            window.open(url, '_blank');
            setTimeout(() => {
                db.ref(`users/${currentUser.sccID}/tasks/${taskKey}`).set(true).then(() => {
                    if(!currentUser.tasks) currentUser.tasks = {}; currentUser.tasks[taskKey] = true;
                    updateTaskUI(id, true); loadTaskStatus(); updateDashUI();
                    showToast('Task Verified!', 'success');
                });
            }, 3000); 
        }

        function openTrackingPage() {
             openPage('trackingPage');
             const list = document.getElementById('trackingListContent');
             list.innerHTML = '<div style="text-align:center;"><i class="fas fa-circle-notch fa-spin"></i> Loading...</div>';
             let devRequestsHTML = '', otherHistoryHTML = '';
             const thirtyDaysAgo = Date.now() - (30 * 24 * 60 * 60 * 1000);

             db.ref('project_requests').orderByChild('sccID').equalTo(currentUser.sccID).once('value').then(s => {
                 if(s.exists()) {
                     let reqs = []; s.forEach(child => reqs.push(child.val()));
                     reqs = reqs.filter(r => r.date >= thirtyDaysAgo).sort((a,b) => b.date - a.date);
                     reqs.forEach(r => { devRequestsHTML += createTimelineCard(r); });
                 }
                 return db.ref('idea_submissions').orderByChild('sccID').equalTo(currentUser.sccID).once('value');
             }).then(s => {
                 if(s.exists()) { s.forEach(req => { const r = req.val(); if(r.timestamp >= thirtyDaysAgo) { otherHistoryHTML += `<div class="track-item"><div><b>Idea:</b> ${r.title}</div><div class="track-status status-submitted">${r.status}</div></div>`; }}); }
                 return db.ref('suspension_appeals').orderByChild('sccID').equalTo(currentUser.sccID).once('value');
             }).then(s => {
                 if(s.exists()) { s.forEach(req => { const r = req.val(); if(r.timestamp >= thirtyDaysAgo) { otherHistoryHTML += `<div class="track-item"><div><b>Appeal:</b> ${r.reason}</div><div class="track-status status-submitted">${r.status}</div></div>`; }}); }
                 if(currentUser.scratch_history) {
                    const history = Object.values(currentUser.scratch_history).filter(h => h.date >= thirtyDaysAgo).reverse();
                    history.forEach(h => {
                        const style = h.coins > 0 ? 'color:#00ff88' : 'color:#aaa';
                        const text = h.type === 'COUPON' ? `ðŸŽŸï¸ Won Coupon: ${h.code}` : (h.coins > 0 ? `+${h.coins} Coins` : `Better luck next time`);
                        otherHistoryHTML += `<div class="track-item" style="opacity:0.8;"><div><b>Scratch Card</b></div><div style="${style}; font-weight:bold;">${text}</div></div>`;
                    });
                 }
                 const finalHTML = (devRequestsHTML || '') + (otherHistoryHTML || '');
                 list.innerHTML = finalHTML || '<p style="text-align:center; color:#666;">No history found for the last 30 days.</p>';
             });
        }

        function createTimelineCard(request) {
            const statuses = ['SUBMITTED', 'UNDER_REVIEW', 'APPROVED', 'QUOTATION_SENT', 'IN_PROGRESS', 'ON_HOLD', 'COMPLETED', 'REJECTED'];
            const labels = ['Submitted', 'Under Review', 'Approved', 'Quotation Sent', 'In Progress', 'On Hold', 'Completed', 'Rejected'];
            let currentIndex = statuses.indexOf(request.status); if(currentIndex === -1) currentIndex = 0;
            let stepsHTML = '';
            const stepsToShow = request.status === 'REJECTED' ? ['SUBMITTED', 'REJECTED'] : statuses.filter(s => s !== 'REJECTED' && s !== 'ON_HOLD');
            stepsToShow.forEach((step, index) => {
               const stepName = labels[statuses.indexOf(step)]; const isActive = statuses.indexOf(step) <= currentIndex;
               stepsHTML += `<div class="timeline-step ${isActive ? 'active' : ''}"><h5>${stepName}</h5></div>`;
            });
            return `<div class="glass-card" style="margin-bottom:20px; border-left:4px solid var(--primary);"><div style="display:flex; justify-content:space-between; margin-bottom:15px;"><div><h4 style="color:white;">${request.type}</h4><small style="color:#888;">ID: ${request.reqID}</small></div><div style="text-align:right;"><span class="track-status status-submitted">${request.status}</span></div></div><div class="timeline-container">${stepsHTML}</div></div>`;
        }

        let scratchCanvas, scratchCtx, isDrawing = false, isRevealed = false;
        function initScratchCard() {
            const lastScratch = currentUser.lastScratch || 0; const now = Date.now();
            if(now - lastScratch < 86400000) {
                const timeLeft = 86400000 - (now - lastScratch); const hrs = Math.floor(timeLeft/3600000);
                return showToast(`Next Scratch available in ${hrs} hours!`, "error");
            }
            openPage('scratchModal');
            scratchCanvas = document.getElementById('scratchCanvas'); scratchCtx = scratchCanvas.getContext('2d');
            const cardWidth = 300; const cardHeight = 180;
            scratchCanvas.width = cardWidth; scratchCanvas.height = cardHeight;
            isRevealed = false; isDrawing = false; scratchCanvas.classList.remove('cleared');
            const rand = Math.random(); let prizeType = 'COIN', coinVal = 0, couponCode = null, displayHTML = '';
            if (rand < 0.6) {
                coinVal = Math.floor(Math.random() * 4900) + 100;
                displayHTML = `<h2 class="congrats">YOU WON!</h2><p class="prize-amount"><i class="fas fa-coins"></i> ${coinVal} Coins</p>`;
            } else if (rand < 0.9) {
                displayHTML = `<h2 class="congrats" style="color:#815B28;">OH NO!</h2><p class="prize-amount" style="font-size: 1.5rem; color:#4B3621;"><i class="fas fa-sad-tear"></i> Better Luck!</p>`;
            } else {
                prizeType = 'COUPON'; const codeSuffix = Math.random().toString(36).substr(2, 6).toUpperCase();
                couponCode = `PREMIUM-${codeSuffix}`;
                displayHTML = `<h2 class="congrats">RARE PRIZE!</h2><p class="prize-amount" style="font-size: 1.2rem;"><i class="fas fa-ticket-alt"></i> ${couponCode}</p>`;
            }
            document.getElementById('prizeLayer').innerHTML = displayHTML;
            scratchCanvas.dataset.type = prizeType; scratchCanvas.dataset.coins = coinVal; scratchCanvas.dataset.code = couponCode;
            const gradient = scratchCtx.createLinearGradient(0, 0, cardWidth, cardHeight);
            gradient.addColorStop(0, '#c0c0c0'); gradient.addColorStop(0.5, '#e8e8e8'); gradient.addColorStop(1, '#a9a9a9');
            scratchCtx.globalCompositeOperation = 'source-over'; scratchCtx.fillStyle = gradient;
            scratchCtx.fillRect(0, 0, cardWidth, cardHeight);
            scratchCtx.fillStyle = '#555'; scratchCtx.font = 'bold 20px Montserrat';
            scratchCtx.textAlign = 'center'; scratchCtx.textBaseline = 'middle';
            scratchCtx.fillText('SCRATCH TO WIN', cardWidth / 2, cardHeight / 2); scratchCtx.font = '30px Arial';
            scratchCtx.fillText('ðŸŽ', cardWidth / 2, cardHeight / 2 - 40);
            scratchCanvas.addEventListener('mousedown', startScratch); scratchCanvas.addEventListener('touchstart', startScratch, { passive: false });
            scratchCanvas.addEventListener('mousemove', scratch); scratchCanvas.addEventListener('touchmove', scratch, { passive: false });
            window.addEventListener('mouseup', endScratch); window.addEventListener('touchend', endScratch);
        }
        function getBrushPos(clientX, clientY) {
            const rect = scratchCanvas.getBoundingClientRect();
            return { x: (clientX - rect.left) / (rect.right - rect.left) * scratchCanvas.width, y: (clientY - rect.top) / (rect.bottom - rect.top) * scratchCanvas.height };
        }
        function startScratch(e) { isDrawing = true; scratch(e); }
        function endScratch() { if (isDrawing) { isDrawing = false; checkScratchCompletion(); } }
        function scratch(e) {
            if (!isDrawing || isRevealed) return; e.preventDefault();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX; const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const pos = getBrushPos(clientX, clientY);
            scratchCtx.globalCompositeOperation = 'destination-out'; scratchCtx.beginPath();
            scratchCtx.arc(pos.x, pos.y, 25, 0, 2 * Math.PI); scratchCtx.fill();
        }
        function checkScratchCompletion() {
            if (isRevealed) return;
            const imageData = scratchCtx.getImageData(0, 0, scratchCanvas.width, scratchCanvas.height);
            const pixels = imageData.data; let transparentCount = 0;
            for (let i = 3; i < pixels.length; i += 4) { if (pixels[i] === 0) transparentCount++; }
            const percentage = (transparentCount / (scratchCanvas.width * scratchCanvas.height)) * 100;
            if (percentage > 40) { revealCardCompletely(); }
        }
        function revealCardCompletely() {
            isRevealed = true; scratchCanvas.classList.add('cleared');
            const end = Date.now() + (1.5 * 1000); const colors = ['#ffc107', '#ffffff', '#ff9800'];
            (function frame() {
                confetti({ particleCount: 2, angle: 60, spread: 55, origin: { x: 0 }, colors: colors, zIndex: 8000 });
                confetti({ particleCount: 2, angle: 120, spread: 55, origin: { x: 1 }, colors: colors, zIndex: 8000 });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
            processScratchPrize(scratchCanvas.dataset.type, parseInt(scratchCanvas.dataset.coins), scratchCanvas.dataset.code);
        }
        function processScratchPrize(type, coins, code) {
            const now = Date.now(); let updates = {};
            updates[`users/${currentUser.sccID}/lastScratch`] = now;
            const historyEntry = { date: now, type: type, coins: coins, code: code || null };
            const historyKey = db.ref(`users/${currentUser.sccID}/scratch_history`).push().key;
            updates[`users/${currentUser.sccID}/scratch_history/${historyKey}`] = historyEntry;
            let message = "";
            if(type === 'COIN' && coins > 0) {
                const newCoins = (currentUser.coins || 0) + coins; const newLifetime = (currentUser.totalLifetimeCoins || 0) + coins;
                updates[`users/${currentUser.sccID}/coins`] = newCoins; updates[`users/${currentUser.sccID}/totalLifetimeCoins`] = newLifetime;
                currentUser.coins = newCoins; message = `ðŸŽ‰ +${coins} Coins Added!`;
            } else if (type === 'COUPON') {
                const expiry = now + (7 * 24 * 60 * 60 * 1000);
                updates[`users/${currentUser.sccID}/my_coupons/${code}`] = { code: code, expiry: expiry, status: 'ACTIVE', type: 'PREMIUM_UNLOCK' };
                updates[`coupons/${code}`] = { owner: currentUser.sccID, expiry: expiry, used: false, type: 'PREMIUM_UNLOCK' };
                message = `ðŸŽ‰ Coupon Saved: ${code}`;
            } else { message = "ðŸ˜„ Better luck next time!"; }
            db.ref().update(updates).then(() => {
                currentUser.lastScratch = now; if(!currentUser.scratch_history) currentUser.scratch_history = {};
                currentUser.scratch_history[historyKey] = historyEntry;
                updateDashUI(); showToast(message, 'success');
            });
        }
        function closeScratchModal() { closePage('scratchModal'); }

        // --- STORE LOGIC ---
        function filterStore(filterType, btnElement) {
            document.querySelectorAll('.store-filter-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active'); loadFullStoreContent(filterType);
        }
        function loadFullStoreContent(filter = 'all') {
             const store = document.getElementById('fullStoreContent'); if (!store) return; store.innerHTML = ''; 
             const firstCode = {
                 id: 'first_website_001', name: 'First Website Source Code', price: 30000, type: 'coin',
                 imageUrl: 'https://i.ibb.co/g2qm7yx/Screenshot-2025-12-05-17-59-55-78-e2d5b3f32b79de1d45acd1fad96fbb0f.jpg',
                 downloadLink: 'https://drive.google.com/drive/folders/1Y4PBeA3PFW4ryryi-NOhnQDvXR3R3uqs'
             };
             db.ref('source_codes').limitToFirst(20).once('value').then(s => {
                 let items = []; items.push({key: firstCode.id, val: firstCode}); 
                 if (s.exists()) { s.forEach(c => { items.push({key: c.key, val: c.val()}); }); }
                 items.forEach(itemObj => {
                     const item = itemObj.val; const key = itemObj.key;
                     const isUnlocked = (currentUser.unlocked_codes && currentUser.unlocked_codes[key]);
                     const isPremium = item.type === 'premium';
                     if (filter === 'premium' && !isPremium) return; if (filter === 'locked' && isUnlocked) return;
                     if (filter === 'unlocked' && !isUnlocked) return;
                     let btnHtml = '', lockOverlay = '', cardAction = '';
                     if (isUnlocked) {
                         btnHtml = `<button class="unlock-btn download"><i class="fas fa-check"></i> ACCESS</button>`;
                         cardAction = `onclick="window.open('${item.downloadLink}', '_blank')"`;
                     } else {
                         lockOverlay = `<div class="lock-overlay"><i class="fas fa-lock"></i></div>`;
                         if(isPremium) {
                             btnHtml = `<button class="unlock-btn coupon"><i class="fas fa-ticket-alt"></i> REDEEM</button>`;
                             cardAction = `onclick="redeemCoupon('${key}')"`;
                         } else {
                             btnHtml = `<button class="unlock-btn buy"><i class="fas fa-unlock"></i> UNLOCK</button>`;
                             cardAction = `onclick="purchaseCode('${key}', ${item.price})"`;
                         }
                     }
                     const cardHtml = `<div class="code-card" ${cardAction}><div class="code-img-wrapper">${lockOverlay}<img src="${item.imageUrl || 'https://via.placeholder.com/200x140.png/0b0b15/ffc107?text=Code'}" alt="${item.name}"></div><div class="code-title">${item.name}</div><div class="code-price">${isPremium ? '<span style="color:#bc13fe">PREMIUM (Coupon)</span>' : '<img src="https://i.ibb.co/C3sJ51dX/file-00000000cb0c722fb4b03f2294c74630.png" style="width:18px;height:18px;"> ' + formatNumber(item.price)}</div>${btnHtml}</div>`;
                     store.innerHTML += cardHtml;
                 });
             });
        }
        function purchaseCode(codeId, price) {
            if ((currentUser.coins || 0) < price) return showToast("Insufficient Coins!", 'error');
            if (confirm(`Unlock this source code for ${price} coins?`)) {
                const newBalance = currentUser.coins - price; const newSpent = (currentUser.total_coins_spent || 0) + price;
                const updates = {};
                updates[`users/${currentUser.sccID}/coins`] = newBalance; updates[`users/${currentUser.sccID}/total_coins_spent`] = newSpent; 
                updates[`users/${currentUser.sccID}/unlocked_codes/${codeId}`] = true;
                db.ref().update(updates).then(() => {
                    currentUser.coins = newBalance; currentUser.total_coins_spent = newSpent;
                    if (!currentUser.unlocked_codes) currentUser.unlocked_codes = {};
                    currentUser.unlocked_codes[codeId] = true; showToast("Purchase Successful!", 'success');
                    updateDashUI(); loadFullStoreContent(document.querySelector('.store-filter-btn.active').innerText.toLowerCase().trim()); 
                });
            }
        }
        function redeemCoupon(codeId) {
            const coupon = prompt("Enter Coupon Code for this item:"); if(!coupon) return;
            db.ref('coupons/' + coupon).once('value').then(s => {
                const cVal = s.val();
                if(s.exists() && !cVal.used) {
                    if(cVal.expiry && Date.now() > cVal.expiry) return showToast("Coupon Expired!", "error");
                    if(cVal.owner && cVal.owner !== currentUser.sccID) return showToast("This coupon belongs to another user!", "error");
                    const updates = {};
                    updates[`users/${currentUser.sccID}/unlocked_codes/${codeId}`] = true;
                    updates[`coupons/${coupon}/used`] = true; updates[`coupons/${coupon}/usedBy`] = currentUser.sccID;
                    db.ref().update(updates).then(() => {
                        if (!currentUser.unlocked_codes) currentUser.unlocked_codes = {};
                        currentUser.unlocked_codes[codeId] = true; showToast("Coupon Redeemed! Item Unlocked.", 'success');
                        loadFullStoreContent('premium'); 
                    });
                } else { showToast("Invalid or Used Coupon.", "error"); }
            });
        }
        
        // --- NEW AVATAR SELECTION LOGIC ---
        function openAvatarSelector() {
            openPage('avatarSelectionPage');
            const grid = document.getElementById('avatarGrid');
            const currentPfp = localStorage.getItem('scc_user_pfp_' + currentUser.sccID);
            grid.innerHTML = '';
            predefinedAvatars.forEach(url => {
                const isSelected = (url === currentPfp) ? 'selected' : '';
                grid.innerHTML += `
                    <div class="avatar-option ${isSelected}" onclick="selectPredefinedAvatar('${url}')">
                        <img src="${url}" alt="Avatar">
                    </div>`;
            });
        }

        function selectPredefinedAvatar(avatarUrl) {
            localStorage.setItem('scc_user_pfp_' + currentUser.sccID, avatarUrl);
            document.getElementById('profilePic').src = avatarUrl;
            
            const grid = document.getElementById('avatarGrid');
            grid.querySelectorAll('.avatar-option').forEach(el => el.classList.remove('selected'));
            const selectedElement = Array.from(grid.querySelectorAll('img')).find(img => img.src === avatarUrl);
            if(selectedElement) selectedElement.parentElement.classList.add('selected');
            
            showToast('Avatar updated!', 'success');
        }

        function triggerPhotoUpload() { 
            closePage('avatarSelectionPage');
            document.getElementById('pfpInput').click(); 
        }

        document.getElementById('pfpInput').addEventListener('change', function(event) {
            const files = event.target.files;
            if (files && files.length > 0) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imageToCrop').src = e.target.result;
                    openPage('cropModal');
                    if(cropper) cropper.destroy();
                    cropper = new Cropper(document.getElementById('imageToCrop'), {
                        aspectRatio: 1, viewMode: 1, background: false, responsive: true, autoCropArea: 1, checkOrientation: false
                    });
                };
                reader.readAsDataURL(files[0]);
            }
            this.value = ''; 
        });

        document.getElementById('saveCropBtn').onclick = function() {
            if (cropper) {
                const btn = this; btn.disabled = true; btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                const base64 = cropper.getCroppedCanvas({ width: 256, height: 256 }).toDataURL('image/jpeg', 0.8);
                document.getElementById('profilePic').src = base64;
                
                localStorage.setItem('scc_user_pfp_' + currentUser.sccID, base64);
                
                cancelCrop();
                showToast('Profile picture updated!', 'success');
                btn.disabled = false; btn.innerHTML = 'Save Photo';
            }
        };
        
        function cancelCrop() {
            if (cropper) { cropper.destroy(); cropper = null; }
            closePage('cropModal');
        }

        function showToast(message, type = 'normal') {
            const toast = document.getElementById("toast");
            toast.className = "show"; toast.textContent = message;
            if (type === 'error') toast.classList.add('error-toast');
            else if (type === 'success') toast.classList.add('success-toast');
            else if (type === 'info') toast.classList.add('info-toast');
            setTimeout(() => { toast.className = toast.className.replace("show", ""); toast.classList.remove('error-toast', 'success-toast', 'info-toast'); }, 3000);
        }

        function openSidebar() { document.getElementById('sidebar').classList.add('active'); document.getElementById('sidebarOverlay').classList.add('active'); }
        function closeSidebar() { document.getElementById('sidebar').classList.remove('active'); document.getElementById('sidebarOverlay').classList.remove('active'); }
        function openLogin() { openPage('loginModal'); }
        function closeLogin() { closePage('loginModal'); }
        
        function openFounder() {
            openPage('founderModal');
            const contentDiv = document.getElementById('founderContent');
            contentDiv.innerHTML = `<div style="text-align:center; padding:50px;"><i class="fas fa-circle-notch fa-spin fa-2x"></i></div>`;
            db.ref('founder_message').once('value').then(s => {
                if (s.exists()) {
                    const data = s.val();
                    contentDiv.innerHTML = `<h1 class="story-heading">Founder's <span class="gradient-text">Message</span></h1><p style="text-align: center; margin-top:20px; font-size: 1.1rem; line-height: 1.7; white-space: pre-wrap;">"${data.message}"</p><div class="cool-box" style="margin-top:30px;"><h3>â€” ${data.name}</h3><p>${data.title}</p></div>`;
                } else { contentDiv.innerHTML = `<h1 class="story-heading">Message Not Found</h1>`; }
            });
        }
        function closeFounder() { closePage('founderModal'); }
        function openLoginFromCreds() { closePage('credsModal'); openLogin(); document.getElementById('loginUser').value = document.getElementById('genUsername').innerText; document.getElementById('loginPass').value = document.getElementById('genPassword').innerText; }
    </script>
</body>
</html>
